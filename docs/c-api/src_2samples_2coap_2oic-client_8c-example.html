<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Soletta™ Framework: /src/samples/coap/oic-client.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Soletta™ Framework
   </div>
   <div id="projectbrief">
   Framework for making IoT devices<br /><br />
   <small>
   <a href="http://solettaproject.github.io/docs/">Full online documentation</a> | 
   <a href="index.html">C API Index</a>
   </small><br />
   </div>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">/src/samples/coap/oic-client.c</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * This file is part of the Soletta (TM) Project</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Copyright (C) 2015 Intel Corporation. All rights reserved.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div>
<div class="line"><span class="comment"> * you may not use this file except in compliance with the License.</span></div>
<div class="line"><span class="comment"> * You may obtain a copy of the License at</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *     http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><span class="comment"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div>
<div class="line"><span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div>
<div class="line"><span class="comment"> * See the License for the specific language governing permissions and</span></div>
<div class="line"><span class="comment"> * limitations under the License.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="sol-log_8h.html">sol-log.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="sol-mainloop_8h.html">sol-mainloop.h</a>&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="sol-oic-client_8h.html">sol-oic-client.h</a>&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line"><a name="a0"></a><a class="code" href="oic-client_8c.html#acc5415346035d88f6c44e87668f11207">got_get_response</a>(<span class="keywordtype">void</span> *data, <span class="keyword">enum</span> <a class="code" href="group__CoAP.html#ga9d2598af666a528ba1f129c7d93bc804">sol_coap_response_code</a> response_code, <span class="keyword">struct</span> <a class="code" href="group__oic__client.html#ga1a360ce1883b3ccd420145b17cefc99f">sol_oic_client</a> *cli, <span class="keyword">const</span> <span class="keyword">struct</span> <a name="_a1"></a><a class="code" href="structsol__network__link__addr.html">sol_network_link_addr</a> *srv_addr, <span class="keyword">const</span> <span class="keyword">struct</span> <a name="_a2"></a><a class="code" href="structsol__oic__map__reader.html">sol_oic_map_reader</a> *map_reader)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a name="_a3"></a><a class="code" href="structsol__oic__repr__field.html">sol_oic_repr_field</a> field;</div>
<div class="line">    <span class="keyword">enum</span> <a class="code" href="group__OIC.html#ga7a4b23f48c8b682ea9a502364c1deb01">sol_oic_map_loop_reason</a> end_reason;</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structsol__oic__map__reader.html">sol_oic_map_reader</a> iterator;</div>
<div class="line"></div>
<div class="line">    <a name="a4"></a><a class="code" href="group__Buffer.html#ga397dbea3989940ad0d1243983a7a2204">SOL_BUFFER_DECLARE_STATIC</a>(addr, <a name="a5"></a><a class="code" href="group__Network.html#ga4d64102cbbadc35c8780d959c11b602c">SOL_NETWORK_INET_ADDR_STR_LEN</a>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!srv_addr) {</div>
<div class="line">        <a name="a6"></a><a class="code" href="group__Log.html#ga5d9529e9746395acc2cd96a28ffa1c28">SOL_WRN</a>(<span class="stringliteral">&quot;Response timeout&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!map_reader) {</div>
<div class="line">        <a class="code" href="group__Log.html#ga5d9529e9746395acc2cd96a28ffa1c28">SOL_WRN</a>(<span class="stringliteral">&quot;Empty Response&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!<a name="a7"></a><a class="code" href="group__Network.html#gad0f810966ed5e85df072c9b005987d14">sol_network_link_addr_to_str</a>(srv_addr, &amp;addr)) {</div>
<div class="line">        <a class="code" href="group__Log.html#ga5d9529e9746395acc2cd96a28ffa1c28">SOL_WRN</a>(<span class="stringliteral">&quot;Could not convert network address to string&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    printf(<span class="stringliteral">&quot;Dumping payload received from addr %.*s {\n&quot;</span>, <a name="a8"></a><a class="code" href="group__Str__Slice.html#ga10c9d829c4d0c50467106a14190d7611">SOL_STR_SLICE_PRINT</a>(<a name="a9"></a><a class="code" href="group__Buffer.html#ga8514e78d12dbe8c959af39de05f7c547">sol_buffer_get_slice</a>(&amp;addr)));</div>
<div class="line">    <a name="a10"></a><a class="code" href="group__OIC.html#gaedb2a91af497e87dfa0c506eb1bd6ecd">SOL_OIC_MAP_LOOP</a>(map_reader, &amp;field, &amp;iterator, end_reason) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;\tkey: &#39;%s&#39;, value: &quot;</span>, field.<a name="a11"></a><a class="code" href="structsol__oic__repr__field.html#ae7635ebb3d78fc3bb99e84c5eb33d8e7">key</a>);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">switch</span> (field.<a name="a12"></a><a class="code" href="structsol__oic__repr__field.html#a801354444eb443fe27a6cd8767cc66a8">type</a>) {</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a13"></a><a class="code" href="group__OIC.html#gga9d7655df4a9042b4e0dead83a2faac1ba29d4eb2bf7f499775f31d41ac09891b3">SOL_OIC_REPR_TYPE_UINT</a>:</div>
<div class="line">            printf(<span class="stringliteral">&quot;uint(%&quot;</span> PRIu64 <span class="stringliteral">&quot;)\n&quot;</span>, field.<a name="a14"></a><a class="code" href="structsol__oic__repr__field.html#a5dee03011ab6538fd376c58e1221a844">v_uint</a>);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a15"></a><a class="code" href="group__OIC.html#gga9d7655df4a9042b4e0dead83a2faac1bac8e723bfa12682a3060e486b03e02991">SOL_OIC_REPR_TYPE_INT</a>:</div>
<div class="line">            printf(<span class="stringliteral">&quot;int(%&quot;</span> PRIi64 <span class="stringliteral">&quot;)\n&quot;</span>, field.<a name="a16"></a><a class="code" href="structsol__oic__repr__field.html#aab27efdb341e02acaf458a371669d0ef">v_int</a>);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a17"></a><a class="code" href="group__OIC.html#gga9d7655df4a9042b4e0dead83a2faac1ba4e8974c16b0590c326c8084be4ac9ad1">SOL_OIC_REPR_TYPE_SIMPLE</a>:</div>
<div class="line">            printf(<span class="stringliteral">&quot;simple(%d)\n&quot;</span>, field.<a name="a18"></a><a class="code" href="structsol__oic__repr__field.html#ad99e542c0e453b79ea26fbb00250924d">v_simple</a>);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a19"></a><a class="code" href="group__OIC.html#gga9d7655df4a9042b4e0dead83a2faac1ba7d0f6a39f4ee216393fbeeef0deb20e1">SOL_OIC_REPR_TYPE_TEXT_STRING</a>:</div>
<div class="line">            printf(<span class="stringliteral">&quot;str(%.*s)\n&quot;</span>, (<span class="keywordtype">int</span>)field.<a name="a20"></a><a class="code" href="structsol__oic__repr__field.html#a4e61bd3541878c770d6132ea0d9e5cb2">v_slice</a>.<a name="a21"></a><a class="code" href="structsol__str__slice.html#a9b9f38d8d946af896daf76fab04473b7">len</a>, field.<a class="code" href="structsol__oic__repr__field.html#a4e61bd3541878c770d6132ea0d9e5cb2">v_slice</a>.<a name="a22"></a><a class="code" href="structsol__str__slice.html#a38ae63b741a375104ae7cc3a5da911a4">data</a>);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a23"></a><a class="code" href="group__OIC.html#gga9d7655df4a9042b4e0dead83a2faac1ba229c76b57516c3d552107a6da5a28b15">SOL_OIC_REPR_TYPE_BYTE_STRING</a>:</div>
<div class="line">            printf(<span class="stringliteral">&quot;bytestr() [not dumping]\n&quot;</span>);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a24"></a><a class="code" href="group__OIC.html#gga9d7655df4a9042b4e0dead83a2faac1ba965d94d8eb5bf63f59eec3248cfb2ffc">SOL_OIC_REPR_TYPE_HALF_FLOAT</a>:</div>
<div class="line">            printf(<span class="stringliteral">&quot;hfloat(%p)\n&quot;</span>, field.<a name="a25"></a><a class="code" href="structsol__oic__repr__field.html#a30dfd15ff0e16afe54b857e5d48fbcd2">v_voidptr</a>);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a26"></a><a class="code" href="group__OIC.html#gga9d7655df4a9042b4e0dead83a2faac1bad9b9e3c55af9a44db19d5dabd7a2dcfb">SOL_OIC_REPR_TYPE_FLOAT</a>:</div>
<div class="line">            printf(<span class="stringliteral">&quot;float(%f)\n&quot;</span>, field.<a name="a27"></a><a class="code" href="structsol__oic__repr__field.html#ad253960f86bd88e96ea028f3f91da87d">v_float</a>);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a28"></a><a class="code" href="group__OIC.html#gga9d7655df4a9042b4e0dead83a2faac1ba19bcfeb0854b4af0c3ec0e33caa945c7">SOL_OIC_REPR_TYPE_DOUBLE</a>:</div>
<div class="line">            printf(<span class="stringliteral">&quot;float(%g)\n&quot;</span>, field.<a name="a29"></a><a class="code" href="structsol__oic__repr__field.html#a36daf048002d25b8c55499f334d06d0f">v_double</a>);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a30"></a><a class="code" href="group__OIC.html#gga9d7655df4a9042b4e0dead83a2faac1baac85764c587e252e2f70380a1ab3e2b9">SOL_OIC_REPR_TYPE_BOOL</a>:</div>
<div class="line">            printf(<span class="stringliteral">&quot;boolean(%s)\n&quot;</span>, field.<a name="a31"></a><a class="code" href="structsol__oic__repr__field.html#acbd5c562158662956caa57adc2e687be">v_boolean</a> ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a32"></a><a class="code" href="group__OIC.html#gga9d7655df4a9042b4e0dead83a2faac1ba71306f82d944d0d020ea4c987ae88382">SOL_OIC_REPR_TYPE_UNSUPPORTED</a>:</div>
<div class="line">            printf(<span class="stringliteral">&quot;\tkey: &#39;%s&#39;, value: unsupported cbor code(%&quot;</span> PRIi64 <span class="stringliteral">&quot;)\n&quot;</span>,</div>
<div class="line">                field.<a class="code" href="structsol__oic__repr__field.html#ae7635ebb3d78fc3bb99e84c5eb33d8e7">key</a>, field.<a class="code" href="structsol__oic__repr__field.html#aab27efdb341e02acaf458a371669d0ef">v_int</a>);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            printf(<span class="stringliteral">&quot;unknown(%d)\n&quot;</span>, field.<a class="code" href="structsol__oic__repr__field.html#a801354444eb443fe27a6cd8767cc66a8">type</a>);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    printf(<span class="stringliteral">&quot;}\n\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">bool</span></div>
<div class="line"><a name="a33"></a><a class="code" href="iotivity-test-client_8c.html#a6cc09e22b723e2987b025a998783466f">found_resource</a>(<span class="keywordtype">void</span> *data,</div>
<div class="line">    <span class="keyword">struct</span> <a class="code" href="group__oic__client.html#ga1a360ce1883b3ccd420145b17cefc99f">sol_oic_client</a> *cli,</div>
<div class="line">    <span class="keyword">struct</span> <a name="_a34"></a><a class="code" href="structsol__oic__resource.html">sol_oic_resource</a> *res)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> digits[] = <span class="stringliteral">&quot;0123456789abcdef&quot;</span>;</div>
<div class="line">    <span class="keyword">struct </span><a name="_a35"></a><a class="code" href="structsol__str__slice.html">sol_str_slice</a> *slice;</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="group__OIC.html#ga491ed65dbd122beb10ab23bceda44900">sol_oic_request</a> *request;</div>
<div class="line">    uint16_t idx;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="group__Buffer.html#ga397dbea3989940ad0d1243983a7a2204">SOL_BUFFER_DECLARE_STATIC</a>(addr, <a class="code" href="group__Network.html#ga4d64102cbbadc35c8780d959c11b602c">SOL_NETWORK_INET_ADDR_STR_LEN</a>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!res)</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!<a class="code" href="group__Network.html#gad0f810966ed5e85df072c9b005987d14">sol_network_link_addr_to_str</a>(&amp;res-&gt;<a name="a36"></a><a class="code" href="structsol__oic__resource.html#a1ccd8a0cf4f7a176d4704fbda0eb1dcd">addr</a>, &amp;addr)) {</div>
<div class="line">        <a class="code" href="group__Log.html#ga5d9529e9746395acc2cd96a28ffa1c28">SOL_WRN</a>(<span class="stringliteral">&quot;Could not convert network address to string&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    printf(<span class="stringliteral">&quot;Found resource: coap://%.*s%.*s\n&quot;</span>, <a class="code" href="group__Str__Slice.html#ga10c9d829c4d0c50467106a14190d7611">SOL_STR_SLICE_PRINT</a>(<a class="code" href="group__Buffer.html#ga8514e78d12dbe8c959af39de05f7c547">sol_buffer_get_slice</a>(&amp;addr)),</div>
<div class="line">        <a class="code" href="group__Str__Slice.html#ga10c9d829c4d0c50467106a14190d7611">SOL_STR_SLICE_PRINT</a>(res-&gt;<a name="a37"></a><a class="code" href="structsol__oic__resource.html#a5405aebaa7bb9e83aaca55a35f34e362">path</a>));</div>
<div class="line"></div>
<div class="line">    printf(<span class="stringliteral">&quot;Flags:\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot; - observable: %s\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot; - secure: %s\n&quot;</span>,</div>
<div class="line">        res-&gt;<a name="a38"></a><a class="code" href="structsol__oic__resource.html#a920b209457f232f5bfe841bea4a89dce">observable</a> ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>,</div>
<div class="line">        res-&gt;<a name="a39"></a><a class="code" href="structsol__oic__resource.html#ac342702bb65db7c6636d471aadf2c959">secure</a> ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);</div>
<div class="line"></div>
<div class="line">    printf(<span class="stringliteral">&quot;Device ID: &quot;</span>);</div>
<div class="line">    <span class="keywordflow">for</span> (idx = 0; idx &lt; 16; idx++) {</div>
<div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> digit = res-&gt;<a name="a40"></a><a class="code" href="structsol__oic__resource.html#ac1838e3cac8f51adb964bd5b91860ea3">device_id</a>.<a class="code" href="structsol__str__slice.html#a38ae63b741a375104ae7cc3a5da911a4">data</a>[idx];</div>
<div class="line">        putchar(digits[(digit &gt;&gt; 4) &amp; 0x0f]);</div>
<div class="line">        putchar(digits[digit &amp; 0x0f]);</div>
<div class="line">    }</div>
<div class="line">    putchar(<span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"></div>
<div class="line">    printf(<span class="stringliteral">&quot;Resource types:\n&quot;</span>);</div>
<div class="line">    <a name="a41"></a><a class="code" href="group__Vector.html#gab02e3bf71600e6bd83fb26fc83935849">SOL_VECTOR_FOREACH_IDX</a> (&amp;res-&gt;<a name="a42"></a><a class="code" href="structsol__oic__resource.html#ac054bc24a03b3f11c22bad778e1d8043">types</a>, slice, idx)</div>
<div class="line">        printf(&quot;\t\t%.*s\n&quot;, <a class="code" href="group__Str__Slice.html#ga10c9d829c4d0c50467106a14190d7611">SOL_STR_SLICE_PRINT</a>(*slice));</div>
<div class="line"></div>
<div class="line">    printf(&quot;Resource interfaces:\n&quot;);</div>
<div class="line">    <a class="code" href="group__Vector.html#gab02e3bf71600e6bd83fb26fc83935849">SOL_VECTOR_FOREACH_IDX</a> (&amp;res-&gt;interfaces, slice, idx)</div>
<div class="line">        printf(&quot;\t\t%.*s\n&quot;, <a class="code" href="group__Str__Slice.html#ga10c9d829c4d0c50467106a14190d7611">SOL_STR_SLICE_PRINT</a>(*slice));</div>
<div class="line"></div>
<div class="line">    printf(&quot;Issuing GET %.*s on resource...\n&quot;, <a class="code" href="group__Str__Slice.html#ga10c9d829c4d0c50467106a14190d7611">SOL_STR_SLICE_PRINT</a>(res-&gt;path));</div>
<div class="line">    request = <a name="a43"></a><a class="code" href="group__oic__client.html#ga23015c9be4cfbafe560cbdd781a2ef66">sol_oic_client_request_new</a>(<a name="a44"></a><a class="code" href="group__CoAP.html#ggac60a0d3f433460b1ead192bc3718bbe3aaa7f46a2ace5e189c25fe7245082f0cb">SOL_COAP_METHOD_GET</a>, res);</div>
<div class="line">    if (!request)</div>
<div class="line">        return false;</div>
<div class="line">    <a name="a45"></a><a class="code" href="group__oic__client.html#gab07a6cde716a528e10fa45f91b83480a">sol_oic_client_request</a>(cli, request, <a class="code" href="oic-client_8c.html#acc5415346035d88f6c44e87668f11207">got_get_response</a>, data);</div>
<div class="line"></div>
<div class="line">    printf(&quot;\n&quot;);</div>
<div class="line"></div>
<div class="line">    return false;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span></div>
<div class="line"><a name="a46"></a><a class="code" href="iotivity-test-client_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structsol__network__link__addr.html">sol_network_link_addr</a> srv_addr =</div>
<div class="line">    { .<a name="a47"></a><a class="code" href="structsol__network__link__addr.html#a8812ee913f288398a3f30ac7e9c8bc50">family</a> = <a name="a48"></a><a class="code" href="group__Network.html#gga04f6e687ec8db41171a71d98d5b8e4f2ad57810107f97996e4c58a292305a42bf">SOL_NETWORK_FAMILY_INET6</a>,</div>
<div class="line">      .port = 5683 };</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="group__oic__client.html#ga1a360ce1883b3ccd420145b17cefc99f">sol_oic_client</a> *client;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *resource_type;</div>
<div class="line"></div>
<div class="line">    <a name="a49"></a><a class="code" href="group__Mainloop.html#ga2b7881c0cfcf1516e99a57949987425c">sol_init</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (argc &lt; 2) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Usage: %s &lt;address&gt; [resource_type]\n&quot;</span>, argv[0]);</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!strchr(argv[1], <span class="charliteral">&#39;:&#39;</span>))</div>
<div class="line">        srv_addr.<a class="code" href="structsol__network__link__addr.html#a8812ee913f288398a3f30ac7e9c8bc50">family</a> = <a name="a50"></a><a class="code" href="group__Network.html#gga04f6e687ec8db41171a71d98d5b8e4f2a235f823da2b4622fa48a4d8f19a55fff">SOL_NETWORK_FAMILY_INET</a>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!<a name="a51"></a><a class="code" href="group__Network.html#gae2e58f688cf87b4f394b2818be76f30b">sol_network_link_addr_from_str</a>(&amp;srv_addr, argv[1])) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Could not convert IP address to sockaddr_in\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    client = <a name="a52"></a><a class="code" href="group__oic__client.html#gac216a7841285744023d7591ddf108b91">sol_oic_client_new</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (argc &lt; 3) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;No rt filter specified, assuming everything\n&quot;</span>);</div>
<div class="line">        resource_type = NULL;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Finding resources with resource type %s\n&quot;</span>, argv[2]);</div>
<div class="line">        resource_type = argv[2];</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a name="a53"></a><a class="code" href="group__oic__client.html#ga9ce1069e8841478f8dab7aad99a0f297">sol_oic_client_find_resources</a>(client, &amp;srv_addr,</div>
<div class="line">        resource_type, NULL, <a class="code" href="iotivity-test-client_8c.html#a6cc09e22b723e2987b025a998783466f">found_resource</a>, NULL);</div>
<div class="line"></div>
<div class="line">    <a name="a54"></a><a class="code" href="group__Mainloop.html#ga40ef0e2ee61ea7a548c00bbae980408b">sol_run</a>();</div>
<div class="line"></div>
<div class="line">    <a name="a55"></a><a class="code" href="group__oic__client.html#ga4388805f09e88cb9d380cc1f3b07ec8a">sol_oic_client_del</a>(client);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
<a href="http://solettaproject.github.io/docs/">Full online documentation</a> | 
<a href="index.html">C API Index</a>
</small></address>
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
