<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Soletta™ Framework: /src/samples/coap/iotivity-test-client.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Soletta™ Framework
   </div>
   <div id="projectbrief">
   Framework for making IoT devices<br /><br />
   <small>
   <a href="http://solettaproject.github.io/docs/">Full online documentation</a> | 
   <a href="index.html">C API Index</a>
   </small><br />
   </div>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">/src/samples/coap/iotivity-test-client.c</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * This file is part of the Soletta (TM) Project</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Copyright (C) 2015 Intel Corporation. All rights reserved.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div>
<div class="line"><span class="comment"> * you may not use this file except in compliance with the License.</span></div>
<div class="line"><span class="comment"> * You may obtain a copy of the License at</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *     http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><span class="comment"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div>
<div class="line"><span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div>
<div class="line"><span class="comment"> * See the License for the specific language governing permissions and</span></div>
<div class="line"><span class="comment"> * limitations under the License.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * Soletta x Iotivity client sample.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * OIC Client using soletta library similar to occlient sample available at</span></div>
<div class="line"><span class="comment"> * iotivity repository. It can be use to test compatibility between Soletta</span></div>
<div class="line"><span class="comment"> * and Iotivity.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * iotivity-test-client is suppose to work with ocserver sample, available at</span></div>
<div class="line"><span class="comment"> * iotivity repository. Also working with src/samples/flow/oic/light-server.fbp</span></div>
<div class="line"><span class="comment"> * soletta sample.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;arpa/inet.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="sol-log_8h.html">sol-log.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="sol-buffer_8h.html">sol-buffer.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="sol-coap_8h.html">sol-coap.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="sol-mainloop_8h.html">sol-mainloop.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="sol-oic-client_8h.html">sol-oic-client.h</a>&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#define DEVICE_ID_LEN (16)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define streq(a, b) (strcmp((a), (b)) == 0)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define POST_REQUEST_POWER (13)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define PUT_REQUEST_POWER (7)</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="keyword">enum</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65">test_number_codes</a> {</div>
<div class="line">    <a name="a0"></a><a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a5003fab5d3dea637a1e839a190aa8880">TEST_DISCOVERY</a> = 1,</div>
<div class="line">    <a name="a1"></a><a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a564f501f2ad7ccefbfc1a5645c7c44c7">TEST_NON_CONFIRMABLE_GET</a> = 2,</div>
<div class="line">    <a name="a2"></a><a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a47270ff043bfdf74b49acd95489d5f48">TEST_NON_CONFIRMABLE_PUT</a> = 4,</div>
<div class="line">    <a name="a3"></a><a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a5c96bcc5a854cc9978b5183d780c4a1c">TEST_NON_CONFIRMABLE_POST</a> = 5,</div>
<div class="line">    <a name="a4"></a><a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65ae72b641675bb8306a28fd919718fbc62">TEST_NON_CONFIRMABLE_DELETE</a> = 6,</div>
<div class="line">    <a name="a5"></a><a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a550d08097f058c8462791842f9234f02">TEST_NON_CONFIRMABLE_OBSERVE</a> = 7,</div>
<div class="line">    <a name="a6"></a><a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65af87987f0cbd571bfe5dd9d5fafb4e185">TEST_NON_CONFIRMABLE_INVALID_GET</a> = 8,</div>
<div class="line">    <a name="a7"></a><a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a2a1a7b94759753173e9b572b83fd43ca">TEST_CONFIRMABLE_GET</a> = 9,</div>
<div class="line">    <a name="a8"></a><a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65af74e93e7cb391ef4a602c4851d9b326c">TEST_CONFIRMABLE_POST</a> = 10,</div>
<div class="line">    <a name="a9"></a><a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65aa60eef8d75b3d462d63e3d2fd8059696">TEST_CONFIRMABLE_DELETE</a> = 11,</div>
<div class="line">    <a name="a10"></a><a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a92aeab7eaab18d33bb914e43eafa93bf">TEST_CONFIRMABLE_OBSERVE</a> = 12,</div>
<div class="line">    <a name="a11"></a><a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a80134522cda11b68e49a751dc3fd55cf">TEST_DISCOVER_PLATFORM</a> = 19,</div>
<div class="line">    <a name="a12"></a><a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a2b46b79cfd5c89884a9e12d84de08cef">TEST_DISCOVER_DEVICES</a> = 20,</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="keyword">struct </span><a name="_a13"></a><a class="code" href="structContext.html">Context</a> {</div>
<div class="line">    <span class="keywordtype">int</span> <a name="a14"></a><a class="code" href="structContext.html#afb90ec1e3a5a8ec5b8e73dcb16a0e30f">test_number</a>;</div>
<div class="line">    <span class="keyword">struct </span><a name="_a15"></a><a class="code" href="structsol__oic__resource.html">sol_oic_resource</a> *<a name="a16"></a><a class="code" href="structContext.html#ac793e39ff754d67b60b00b2872572a01">res</a>;</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">bool</span> <a name="a17"></a><a class="code" href="iotivity-test-client_8c.html#a6cc09e22b723e2987b025a998783466f">found_resource</a>(<span class="keywordtype">void</span> *data, <span class="keyword">struct</span> <a class="code" href="group__oic__client.html#ga1a360ce1883b3ccd420145b17cefc99f">sol_oic_client</a> *cli, <span class="keyword">struct</span> <a class="code" href="structsol__oic__resource.html">sol_oic_resource</a> *res);</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line"><a name="a18"></a><a class="code" href="iotivity-test-client_8c.html#a05beee9e7c8c8cda96ad216b350bf226">device_id_decode</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *device_id_encoded, <span class="keywordtype">char</span> *<a name="a19"></a><a class="code" href="structsol__oic__resource.html#ac1838e3cac8f51adb964bd5b91860ea3">device_id</a>)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> digits[] = <span class="stringliteral">&quot;0123456789abcdef&quot;</span>;</div>
<div class="line">    uint16_t idx;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (idx = 0; idx &lt; <a name="a20"></a><a class="code" href="iotivity-test-client_8c.html#a108827ef5ba796ac6b9fffd6b6048353">DEVICE_ID_LEN</a>; idx++) {</div>
<div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> digit = device_id_encoded[idx];</div>
<div class="line">        device_id[idx * 2] = digits[(digit &gt;&gt; 4) &amp; 0x0f];</div>
<div class="line">        device_id[idx * 2 + 1] = digits[digit &amp; 0x0f];</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">bool</span></div>
<div class="line"><a name="a21"></a><a class="code" href="iotivity-test-client_8c.html#af55e2fb7249a370e69086939b24e838b">found_resource_print</a>(<span class="keywordtype">void</span> *data,</div>
<div class="line">    <span class="keyword">struct</span> <a class="code" href="group__oic__client.html#ga1a360ce1883b3ccd420145b17cefc99f">sol_oic_client</a> *cli,</div>
<div class="line">    <span class="keyword">struct</span> <a class="code" href="structsol__oic__resource.html">sol_oic_resource</a> *res)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a name="_a22"></a><a class="code" href="structsol__str__slice.html">sol_str_slice</a> *slice;</div>
<div class="line">    uint16_t idx;</div>
<div class="line">    <span class="keywordtype">char</span> device_id[<a class="code" href="iotivity-test-client_8c.html#a108827ef5ba796ac6b9fffd6b6048353">DEVICE_ID_LEN</a> * 2];</div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">bool</span> resource_found = <span class="keyword">false</span>;</div>
<div class="line"></div>
<div class="line">    <a name="a23"></a><a class="code" href="group__Buffer.html#ga397dbea3989940ad0d1243983a7a2204">SOL_BUFFER_DECLARE_STATIC</a>(addr, <a name="a24"></a><a class="code" href="group__Network.html#ga4d64102cbbadc35c8780d959c11b602c">SOL_NETWORK_INET_ADDR_STR_LEN</a>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!res) {</div>
<div class="line">        <span class="keywordflow">if</span> (!resource_found) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;No resource found\n&quot;</span>);</div>
<div class="line">            <a name="a25"></a><a class="code" href="group__Mainloop.html#gab1deec1c7e4da3b7b8caeafe9369b816">sol_quit_with_code</a>(EXIT_FAILURE);</div>
<div class="line">        } <span class="keywordflow">else</span></div>
<div class="line">            <a name="a26"></a><a class="code" href="group__Mainloop.html#ga56c31320e4348c91a719039b5a22dd25">sol_quit</a>();</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (res-&gt;<a class="code" href="structsol__oic__resource.html#ac1838e3cac8f51adb964bd5b91860ea3">device_id</a>.<a name="a27"></a><a class="code" href="structsol__str__slice.html#a9b9f38d8d946af896daf76fab04473b7">len</a> &lt; <a class="code" href="iotivity-test-client_8c.html#a108827ef5ba796ac6b9fffd6b6048353">DEVICE_ID_LEN</a>) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Invalid device id\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!<a name="a28"></a><a class="code" href="group__Network.html#gad0f810966ed5e85df072c9b005987d14">sol_network_link_addr_to_str</a>(&amp;res-&gt;<a name="a29"></a><a class="code" href="structsol__oic__resource.html#a1ccd8a0cf4f7a176d4704fbda0eb1dcd">addr</a>, &amp;addr)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Could not convert network address to string\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    resource_found = <span class="keyword">true</span>;</div>
<div class="line">    printf(<span class="stringliteral">&quot;Found resource: coap://%.*s%.*s\n&quot;</span>, <a name="a30"></a><a class="code" href="group__Str__Slice.html#ga10c9d829c4d0c50467106a14190d7611">SOL_STR_SLICE_PRINT</a>(<a name="a31"></a><a class="code" href="group__Buffer.html#ga8514e78d12dbe8c959af39de05f7c547">sol_buffer_get_slice</a>(&amp;addr)),</div>
<div class="line">        <a class="code" href="group__Str__Slice.html#ga10c9d829c4d0c50467106a14190d7611">SOL_STR_SLICE_PRINT</a>(res-&gt;<a name="a32"></a><a class="code" href="structsol__oic__resource.html#a5405aebaa7bb9e83aaca55a35f34e362">path</a>));</div>
<div class="line"></div>
<div class="line">    printf(<span class="stringliteral">&quot;Flags:\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot; - observable: %s\n&quot;</span>, res-&gt;<a name="a33"></a><a class="code" href="structsol__oic__resource.html#a920b209457f232f5bfe841bea4a89dce">observable</a> ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot; - secure: %s\n&quot;</span>, res-&gt;<a name="a34"></a><a class="code" href="structsol__oic__resource.html#ac342702bb65db7c6636d471aadf2c959">secure</a> ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <a class="code" href="iotivity-test-client_8c.html#a05beee9e7c8c8cda96ad216b350bf226">device_id_decode</a>(res-&gt;<a class="code" href="structsol__oic__resource.html#ac1838e3cac8f51adb964bd5b91860ea3">device_id</a>.<a name="a35"></a><a class="code" href="structsol__str__slice.html#a38ae63b741a375104ae7cc3a5da911a4">data</a>, device_id);</div>
<div class="line">    printf(<span class="stringliteral">&quot;Device ID: %.*s\n&quot;</span>, <a class="code" href="iotivity-test-client_8c.html#a108827ef5ba796ac6b9fffd6b6048353">DEVICE_ID_LEN</a> * 2, device_id);</div>
<div class="line"></div>
<div class="line">    printf(<span class="stringliteral">&quot;Resource types:\n&quot;</span>);</div>
<div class="line">    <a name="a36"></a><a class="code" href="group__Vector.html#gab02e3bf71600e6bd83fb26fc83935849">SOL_VECTOR_FOREACH_IDX</a> (&amp;res-&gt;<a name="a37"></a><a class="code" href="structsol__oic__resource.html#ac054bc24a03b3f11c22bad778e1d8043">types</a>, slice, idx)</div>
<div class="line">        printf(&quot;\t\t%.*s\n&quot;, <a class="code" href="group__Str__Slice.html#ga10c9d829c4d0c50467106a14190d7611">SOL_STR_SLICE_PRINT</a>(*slice));</div>
<div class="line"></div>
<div class="line">    printf(&quot;Resource interfaces:\n&quot;);</div>
<div class="line">    <a class="code" href="group__Vector.html#gab02e3bf71600e6bd83fb26fc83935849">SOL_VECTOR_FOREACH_IDX</a> (&amp;res-&gt;interfaces, slice, idx)</div>
<div class="line">        printf(&quot;\t\t%.*s\n&quot;, <a class="code" href="group__Str__Slice.html#ga10c9d829c4d0c50467106a14190d7611">SOL_STR_SLICE_PRINT</a>(*slice));</div>
<div class="line">    printf(&quot;\n&quot;);</div>
<div class="line"></div>
<div class="line">    return true;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">static <span class="keywordtype">void</span></div>
<div class="line"><a name="a38"></a><a class="code" href="iotivity-test-client_8c.html#a3c9689ffa2004a9902b21ffb99f54ec6">fill_info</a>(const struct <a name="_a39"></a><a class="code" href="structsol__oic__map__reader.html">sol_oic_map_reader</a> *map_reader, <span class="keywordtype">bool</span> *state, int32_t *power)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a name="_a40"></a><a class="code" href="structsol__oic__repr__field.html">sol_oic_repr_field</a> field;</div>
<div class="line">    <span class="keyword">enum</span> <a class="code" href="group__OIC.html#ga7a4b23f48c8b682ea9a502364c1deb01">sol_oic_map_loop_reason</a> end_reason;</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structsol__oic__map__reader.html">sol_oic_map_reader</a> iterator;</div>
<div class="line"></div>
<div class="line">    <a name="a41"></a><a class="code" href="group__OIC.html#gaedb2a91af497e87dfa0c506eb1bd6ecd">SOL_OIC_MAP_LOOP</a>(map_reader, &amp;field, &amp;iterator, end_reason) {</div>
<div class="line">        <span class="keywordflow">if</span> (state &amp;&amp; <a name="a42"></a><a class="code" href="iotivity-test-client_8c.html#a142287b2552d8354d673374eb4da4232">streq</a>(field.key, <span class="stringliteral">&quot;state&quot;</span>) &amp;&amp;</div>
<div class="line">            field.type == <a name="a43"></a><a class="code" href="group__OIC.html#gga9d7655df4a9042b4e0dead83a2faac1baac85764c587e252e2f70380a1ab3e2b9">SOL_OIC_REPR_TYPE_BOOL</a>) {</div>
<div class="line">            *state = field.v_boolean;</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (power &amp;&amp; <a class="code" href="iotivity-test-client_8c.html#a142287b2552d8354d673374eb4da4232">streq</a>(field.key, <span class="stringliteral">&quot;power&quot;</span>)) {</div>
<div class="line">            <span class="keywordflow">if</span> (field.type == <a name="a44"></a><a class="code" href="group__OIC.html#gga9d7655df4a9042b4e0dead83a2faac1ba29d4eb2bf7f499775f31d41ac09891b3">SOL_OIC_REPR_TYPE_UINT</a>)</div>
<div class="line">                *power = field.v_uint;</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field.type == <a name="a45"></a><a class="code" href="group__OIC.html#gga9d7655df4a9042b4e0dead83a2faac1bac8e723bfa12682a3060e486b03e02991">SOL_OIC_REPR_TYPE_INT</a>)</div>
<div class="line">                *power = field.v_int;</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field.type == <a name="a46"></a><a class="code" href="group__OIC.html#gga9d7655df4a9042b4e0dead83a2faac1ba4e8974c16b0590c326c8084be4ac9ad1">SOL_OIC_REPR_TYPE_SIMPLE</a>)</div>
<div class="line">                *power = field.v_simple;</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line"><a name="a47"></a><a class="code" href="iotivity-test-client_8c.html#a571c35f89bd1bfbe8ed038c39c66df63">check_delete_request</a>(<span class="keywordtype">void</span> *data, <span class="keyword">enum</span> <a class="code" href="group__CoAP.html#ga9d2598af666a528ba1f129c7d93bc804">sol_coap_response_code</a> response_code, <span class="keyword">struct</span> <a class="code" href="group__oic__client.html#ga1a360ce1883b3ccd420145b17cefc99f">sol_oic_client</a> *cli, <span class="keyword">const</span> <span class="keyword">struct</span> <a name="_a48"></a><a class="code" href="structsol__network__link__addr.html">sol_network_link_addr</a> *cliaddr, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structsol__oic__map__reader.html">sol_oic_map_reader</a> *map_reader)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (response_code == <a name="a49"></a><a class="code" href="group__CoAP.html#gga9d2598af666a528ba1f129c7d93bc804a0d73bb1a9d935c226e8a9bffc88302cb">SOL_COAP_RESPONSE_CODE_NOT_FOUND</a>)</div>
<div class="line">        <a class="code" href="group__Mainloop.html#ga56c31320e4348c91a719039b5a22dd25">sol_quit</a>();</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        printf(<span class="stringliteral">&quot;DELETE request failed\n&quot;</span>);</div>
<div class="line">        <a class="code" href="group__Mainloop.html#gab1deec1c7e4da3b7b8caeafe9369b816">sol_quit_with_code</a>(EXIT_FAILURE);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line"><a name="a50"></a><a class="code" href="iotivity-test-client_8c.html#ad5973b64e1f0d06e8a8edffe366ab3b0">check_put_request</a>(<span class="keywordtype">void</span> *data, <span class="keyword">enum</span> <a class="code" href="group__CoAP.html#ga9d2598af666a528ba1f129c7d93bc804">sol_coap_response_code</a> response_code, <span class="keyword">struct</span> <a class="code" href="group__oic__client.html#ga1a360ce1883b3ccd420145b17cefc99f">sol_oic_client</a> *cli, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structsol__network__link__addr.html">sol_network_link_addr</a> *cliaddr, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structsol__oic__map__reader.html">sol_oic_map_reader</a> *map_reader)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">bool</span> state = <span class="keyword">false</span>;</div>
<div class="line">    int32_t power = -1;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!cliaddr || !map_reader ||</div>
<div class="line">        response_code &gt;= <a name="a51"></a><a class="code" href="group__CoAP.html#gga9d2598af666a528ba1f129c7d93bc804ad902271e0afb6b4ac1b1a795b25a2283">SOL_COAP_RESPONSE_CODE_BAD_REQUEST</a>) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Invalid GET response after a PUT\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="iotivity-test-client_8c.html#a3c9689ffa2004a9902b21ffb99f54ec6">fill_info</a>(map_reader, &amp;state, &amp;power);</div>
<div class="line">    <span class="keywordflow">if</span> (power == <a name="a52"></a><a class="code" href="iotivity-test-client_8c.html#a201195bd5b0e25f84b2b13718734979e">PUT_REQUEST_POWER</a> &amp;&amp; state == <span class="keyword">true</span>) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;PUT request successful\n&quot;</span>);</div>
<div class="line">        <a class="code" href="group__Mainloop.html#ga56c31320e4348c91a719039b5a22dd25">sol_quit</a>();</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        printf(<span class="stringliteral">&quot;PUT request failed\n&quot;</span>);</div>
<div class="line">        <a class="code" href="group__Mainloop.html#gab1deec1c7e4da3b7b8caeafe9369b816">sol_quit_with_code</a>(EXIT_FAILURE);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line"><a name="a53"></a><a class="code" href="iotivity-test-client_8c.html#a70898bfb7745fcfd29abdbd06fdd708e">check_post_request</a>(<span class="keywordtype">void</span> *data, <span class="keyword">enum</span> <a class="code" href="group__CoAP.html#ga9d2598af666a528ba1f129c7d93bc804">sol_coap_response_code</a> response_code, <span class="keyword">struct</span> <a class="code" href="group__oic__client.html#ga1a360ce1883b3ccd420145b17cefc99f">sol_oic_client</a> *cli, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structsol__network__link__addr.html">sol_network_link_addr</a> *cliaddr, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structsol__oic__map__reader.html">sol_oic_map_reader</a> *map_reader)</div>
<div class="line">{</div>
<div class="line">    int32_t power = -1;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!cliaddr || !map_reader ||</div>
<div class="line">        response_code &gt;= <a class="code" href="group__CoAP.html#gga9d2598af666a528ba1f129c7d93bc804ad902271e0afb6b4ac1b1a795b25a2283">SOL_COAP_RESPONSE_CODE_BAD_REQUEST</a>) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Invalid GET response after a PUT\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="iotivity-test-client_8c.html#a3c9689ffa2004a9902b21ffb99f54ec6">fill_info</a>(map_reader, NULL, &amp;power);</div>
<div class="line">    <span class="keywordflow">if</span> (power == <a name="a54"></a><a class="code" href="iotivity-test-client_8c.html#a21206f1be4773be18019f0c0cd80eba9">POST_REQUEST_POWER</a>) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;POST request successful\n&quot;</span>);</div>
<div class="line">        <a class="code" href="group__Mainloop.html#ga56c31320e4348c91a719039b5a22dd25">sol_quit</a>();</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        printf(<span class="stringliteral">&quot;POST request failed\n&quot;</span>);</div>
<div class="line">        <a class="code" href="group__Mainloop.html#gab1deec1c7e4da3b7b8caeafe9369b816">sol_quit_with_code</a>(EXIT_FAILURE);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line"><a name="a55"></a><a class="code" href="iotivity-test-client_8c.html#a6b82dc1fc9da23c525bd833577938f35">post_fill_repr_map</a>(<span class="keyword">struct</span> <a class="code" href="group__OIC.html#ga44c3b063a667be23483a298426d2b956">sol_oic_map_writer</a> *repr_map)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> <a name="a56"></a><a class="code" href="group__OIC.html#ga82777dd759a62e7d016816a3f082964c">sol_oic_map_append</a>(repr_map, &amp;<a name="a57"></a><a class="code" href="group__OIC.html#ga39dc553046a16682d35e0ed577227284">SOL_OIC_REPR_INT</a>(<span class="stringliteral">&quot;power&quot;</span>,</div>
<div class="line">        <a class="code" href="iotivity-test-client_8c.html#a21206f1be4773be18019f0c0cd80eba9">POST_REQUEST_POWER</a>));</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">bool</span></div>
<div class="line"><a name="a58"></a><a class="code" href="iotivity-test-client_8c.html#a838fd544cb7792d278a02c05f6050cb1">check_response_code</a>(<span class="keyword">enum</span> <a class="code" href="group__CoAP.html#ga9d2598af666a528ba1f129c7d93bc804">sol_coap_response_code</a> response_code, <span class="keywordtype">int</span> test_number)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">switch</span> (test_number) {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a564f501f2ad7ccefbfc1a5645c7c44c7">TEST_NON_CONFIRMABLE_GET</a>:</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a2a1a7b94759753173e9b572b83fd43ca">TEST_CONFIRMABLE_GET</a>:</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a550d08097f058c8462791842f9234f02">TEST_NON_CONFIRMABLE_OBSERVE</a>:</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a92aeab7eaab18d33bb914e43eafa93bf">TEST_CONFIRMABLE_OBSERVE</a>:</div>
<div class="line">        <span class="keywordflow">return</span> response_code == <a name="a59"></a><a class="code" href="group__CoAP.html#gga9d2598af666a528ba1f129c7d93bc804a54dda894c7559518aff17935e5fa20c9">SOL_COAP_RESPONSE_CODE_OK</a> ||</div>
<div class="line">               response_code == <a name="a60"></a><a class="code" href="group__CoAP.html#gga9d2598af666a528ba1f129c7d93bc804aaf20408d1f2340e4e28bc4acca4a1d9f">SOL_COAP_RESPONSE_CODE_CONTENT</a>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a47270ff043bfdf74b49acd95489d5f48">TEST_NON_CONFIRMABLE_PUT</a>:</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a5c96bcc5a854cc9978b5183d780c4a1c">TEST_NON_CONFIRMABLE_POST</a>:</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65af74e93e7cb391ef4a602c4851d9b326c">TEST_CONFIRMABLE_POST</a>:</div>
<div class="line">        <span class="keywordflow">return</span> response_code == <a name="a61"></a><a class="code" href="group__CoAP.html#gga9d2598af666a528ba1f129c7d93bc804abe677b03fc638b5f4a5fc9bea1c93944">SOL_COAP_RESPONSE_CODE_CHANGED</a>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65ae72b641675bb8306a28fd919718fbc62">TEST_NON_CONFIRMABLE_DELETE</a>:</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65aa60eef8d75b3d462d63e3d2fd8059696">TEST_CONFIRMABLE_DELETE</a>:</div>
<div class="line">        <span class="keywordflow">return</span> response_code == <a class="code" href="group__CoAP.html#gga9d2598af666a528ba1f129c7d93bc804aaf20408d1f2340e4e28bc4acca4a1d9f">SOL_COAP_RESPONSE_CODE_CONTENT</a> ||</div>
<div class="line">               response_code == <a name="a62"></a><a class="code" href="group__CoAP.html#gga9d2598af666a528ba1f129c7d93bc804abef90f9701bc2e1eb52f6827ec89dfc8">SOL_COAP_RESPONSE_CODE_DELETED</a>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65af87987f0cbd571bfe5dd9d5fafb4e185">TEST_NON_CONFIRMABLE_INVALID_GET</a>:</div>
<div class="line">        <span class="keywordflow">return</span> response_code == <a class="code" href="group__CoAP.html#gga9d2598af666a528ba1f129c7d93bc804a0d73bb1a9d935c226e8a9bffc88302cb">SOL_COAP_RESPONSE_CODE_NOT_FOUND</a>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line"><a name="a63"></a><a class="code" href="iotivity-test-client_8c.html#a288da8b2554af5cd71a24d93bbf7c420">resource_notify</a>(<span class="keywordtype">void</span> *data, <span class="keyword">enum</span> <a class="code" href="group__CoAP.html#ga9d2598af666a528ba1f129c7d93bc804">sol_coap_response_code</a> response_code, <span class="keyword">struct</span> <a class="code" href="group__oic__client.html#ga1a360ce1883b3ccd420145b17cefc99f">sol_oic_client</a> *cli, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structsol__network__link__addr.html">sol_network_link_addr</a> *cliaddr,</div>
<div class="line">    <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structsol__oic__map__reader.html">sol_oic_map_reader</a> *map_reader)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structContext.html">Context</a> *ctx = data;</div>
<div class="line">    <span class="keyword">static</span> uint8_t notify_count = 0;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="group__Buffer.html#ga397dbea3989940ad0d1243983a7a2204">SOL_BUFFER_DECLARE_STATIC</a>(addr, <a class="code" href="group__Network.html#ga4d64102cbbadc35c8780d959c11b602c">SOL_NETWORK_INET_ADDR_STR_LEN</a>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!cliaddr) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Timeout reached\n&quot;</span>);</div>
<div class="line">        <a class="code" href="group__Mainloop.html#gab1deec1c7e4da3b7b8caeafe9369b816">sol_quit_with_code</a>(EXIT_FAILURE);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!<a class="code" href="group__Network.html#gad0f810966ed5e85df072c9b005987d14">sol_network_link_addr_to_str</a>(cliaddr, &amp;addr)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Could not convert network address to string\n&quot;</span>);</div>
<div class="line">        <a class="code" href="group__Mainloop.html#gab1deec1c7e4da3b7b8caeafe9369b816">sol_quit_with_code</a>(EXIT_FAILURE);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!<a class="code" href="iotivity-test-client_8c.html#a838fd544cb7792d278a02c05f6050cb1">check_response_code</a>(response_code, ctx-&gt;<a class="code" href="structContext.html#afb90ec1e3a5a8ec5b8e73dcb16a0e30f">test_number</a>)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Invalid response\n&quot;</span>);</div>
<div class="line">        <a class="code" href="group__Mainloop.html#gab1deec1c7e4da3b7b8caeafe9369b816">sol_quit_with_code</a>(EXIT_FAILURE);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    printf(<span class="stringliteral">&quot;Received successful notification packet from: %.*s\n&quot;</span>, <a class="code" href="group__Str__Slice.html#ga10c9d829c4d0c50467106a14190d7611">SOL_STR_SLICE_PRINT</a>(<a class="code" href="group__Buffer.html#ga8514e78d12dbe8c959af39de05f7c547">sol_buffer_get_slice</a>(&amp;addr)));</div>
<div class="line">    <span class="keywordflow">if</span> (notify_count++ &gt;= 5)</div>
<div class="line">        <a class="code" href="group__Mainloop.html#ga56c31320e4348c91a719039b5a22dd25">sol_quit</a>();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line"><a name="a64"></a><a class="code" href="iotivity-test-client_8c.html#a8a1f58eae723ccc14dad6808b9bef6d1">dump_byte_string</a>(<span class="keyword">struct</span> <a name="_a65"></a><a class="code" href="structsol__buffer.html">sol_buffer</a> *buf, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structsol__str__slice.html">sol_str_slice</a> bytes)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *p, *end;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!bytes.<a class="code" href="structsol__str__slice.html#a9b9f38d8d946af896daf76fab04473b7">len</a>)</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line"></div>
<div class="line">    end = bytes.<a class="code" href="structsol__str__slice.html#a38ae63b741a375104ae7cc3a5da911a4">data</a> + bytes.<a class="code" href="structsol__str__slice.html#a9b9f38d8d946af896daf76fab04473b7">len</a>;</div>
<div class="line">    <span class="keywordflow">for</span> (p = bytes.<a class="code" href="structsol__str__slice.html#a38ae63b741a375104ae7cc3a5da911a4">data</a>; p &lt; end; p++) {</div>
<div class="line">        <span class="keywordflow">if</span> (isprint(*p))</div>
<div class="line">            <a name="a66"></a><a class="code" href="group__Buffer.html#gaa10688d2bc1c7cfaca143cdcd16e0d18">sol_buffer_append_printf</a>(buf, <span class="stringliteral">&quot;%#x(%c) &quot;</span>, *p, *p);</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            <a class="code" href="group__Buffer.html#gaa10688d2bc1c7cfaca143cdcd16e0d18">sol_buffer_append_printf</a>(buf, <span class="stringliteral">&quot;%#x &quot;</span>, *p);</div>
<div class="line">    }</div>
<div class="line">    buf-&gt;<a name="a67"></a><a class="code" href="structsol__buffer.html#a50844b0cbc4ae956fd4335537756bfa9">used</a>--;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line"><a name="a68"></a><a class="code" href="iotivity-test-client_8c.html#aed751137db1e85b968e1268d079f4180">print_response</a>(<span class="keywordtype">void</span> *data, <span class="keyword">enum</span> <a class="code" href="group__CoAP.html#ga9d2598af666a528ba1f129c7d93bc804">sol_coap_response_code</a> response_code, <span class="keyword">struct</span> <a class="code" href="group__oic__client.html#ga1a360ce1883b3ccd420145b17cefc99f">sol_oic_client</a> *cli, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structsol__network__link__addr.html">sol_network_link_addr</a> *cliaddr,</div>
<div class="line">    <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structsol__oic__map__reader.html">sol_oic_map_reader</a> *map_reader)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structsol__oic__repr__field.html">sol_oic_repr_field</a> field;</div>
<div class="line">    <span class="keyword">enum</span> <a class="code" href="group__OIC.html#ga7a4b23f48c8b682ea9a502364c1deb01">sol_oic_map_loop_reason</a> end_reason;</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structsol__oic__map__reader.html">sol_oic_map_reader</a> iterator;</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structContext.html">Context</a> *ctx = data;</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structsol__buffer.html">sol_buffer</a> buf = <a name="a69"></a><a class="code" href="group__Buffer.html#gaa713288ab086f3fcd98c51870a571a52">SOL_BUFFER_INIT_EMPTY</a>;</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="group__OIC.html#ga491ed65dbd122beb10ab23bceda44900">sol_oic_request</a> *request;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="group__Buffer.html#ga397dbea3989940ad0d1243983a7a2204">SOL_BUFFER_DECLARE_STATIC</a>(addr, <a class="code" href="group__Network.html#ga4d64102cbbadc35c8780d959c11b602c">SOL_NETWORK_INET_ADDR_STR_LEN</a>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!cliaddr) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Timeout reached\n&quot;</span>);</div>
<div class="line">        <a class="code" href="group__Mainloop.html#gab1deec1c7e4da3b7b8caeafe9369b816">sol_quit_with_code</a>(EXIT_FAILURE);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!<a class="code" href="group__Network.html#gad0f810966ed5e85df072c9b005987d14">sol_network_link_addr_to_str</a>(cliaddr, &amp;addr)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Could not convert network address to string\n&quot;</span>);</div>
<div class="line">        <a class="code" href="group__Mainloop.html#gab1deec1c7e4da3b7b8caeafe9369b816">sol_quit_with_code</a>(EXIT_FAILURE);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!<a class="code" href="iotivity-test-client_8c.html#a838fd544cb7792d278a02c05f6050cb1">check_response_code</a>(response_code, ctx-&gt;<a class="code" href="structContext.html#afb90ec1e3a5a8ec5b8e73dcb16a0e30f">test_number</a>)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Invalid response\n&quot;</span>);</div>
<div class="line">        <a class="code" href="group__Mainloop.html#gab1deec1c7e4da3b7b8caeafe9369b816">sol_quit_with_code</a>(EXIT_FAILURE);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (ctx-&gt;<a class="code" href="structContext.html#afb90ec1e3a5a8ec5b8e73dcb16a0e30f">test_number</a> == <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65ae72b641675bb8306a28fd919718fbc62">TEST_NON_CONFIRMABLE_DELETE</a> ||</div>
<div class="line">        ctx-&gt;<a class="code" href="structContext.html#afb90ec1e3a5a8ec5b8e73dcb16a0e30f">test_number</a> == <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65aa60eef8d75b3d462d63e3d2fd8059696">TEST_CONFIRMABLE_DELETE</a>) {</div>
<div class="line">        request = <a name="a70"></a><a class="code" href="group__oic__client.html#ga23015c9be4cfbafe560cbdd781a2ef66">sol_oic_client_request_new</a>(<a name="a71"></a><a class="code" href="group__CoAP.html#ggac60a0d3f433460b1ead192bc3718bbe3aaa7f46a2ace5e189c25fe7245082f0cb">SOL_COAP_METHOD_GET</a>, ctx-&gt;<a class="code" href="structContext.html#ac793e39ff754d67b60b00b2872572a01">res</a>);</div>
<div class="line">        <a name="a72"></a><a class="code" href="group__oic__client.html#gab07a6cde716a528e10fa45f91b83480a">sol_oic_client_request</a>(cli, request, <a class="code" href="iotivity-test-client_8c.html#a571c35f89bd1bfbe8ed038c39c66df63">check_delete_request</a>,</div>
<div class="line">            NULL);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (map_reader) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Dumping payload received from addr %.*s {\n&quot;</span>, <a class="code" href="group__Str__Slice.html#ga10c9d829c4d0c50467106a14190d7611">SOL_STR_SLICE_PRINT</a>(<a class="code" href="group__Buffer.html#ga8514e78d12dbe8c959af39de05f7c547">sol_buffer_get_slice</a>(&amp;addr)));</div>
<div class="line">        <a class="code" href="group__OIC.html#gaedb2a91af497e87dfa0c506eb1bd6ecd">SOL_OIC_MAP_LOOP</a>(map_reader, &amp;field, &amp;iterator, end_reason) {</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">switch</span> (field.type) {</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="group__OIC.html#gga9d7655df4a9042b4e0dead83a2faac1ba29d4eb2bf7f499775f31d41ac09891b3">SOL_OIC_REPR_TYPE_UINT</a>:</div>
<div class="line">                printf(<span class="stringliteral">&quot;\tkey: &#39;%s&#39;, value: uint(%&quot;</span> PRIu64 <span class="stringliteral">&quot;)\n&quot;</span>, field.key,</div>
<div class="line">                    field.v_uint);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="group__OIC.html#gga9d7655df4a9042b4e0dead83a2faac1bac8e723bfa12682a3060e486b03e02991">SOL_OIC_REPR_TYPE_INT</a>:</div>
<div class="line">                printf(<span class="stringliteral">&quot;\tkey: &#39;%s&#39;, value: int(%&quot;</span> PRIi64 <span class="stringliteral">&quot;)\n&quot;</span>, field.key,</div>
<div class="line">                    field.v_int);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="group__OIC.html#gga9d7655df4a9042b4e0dead83a2faac1ba4e8974c16b0590c326c8084be4ac9ad1">SOL_OIC_REPR_TYPE_SIMPLE</a>:</div>
<div class="line">                printf(<span class="stringliteral">&quot;\tkey: &#39;%s&#39;, value: simple(%d)\n&quot;</span>, field.key,</div>
<div class="line">                    field.v_simple);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> <a name="a73"></a><a class="code" href="group__OIC.html#gga9d7655df4a9042b4e0dead83a2faac1ba7d0f6a39f4ee216393fbeeef0deb20e1">SOL_OIC_REPR_TYPE_TEXT_STRING</a>:</div>
<div class="line">                printf(<span class="stringliteral">&quot;\tkey: &#39;%s&#39;, value: str(%.*s)\n&quot;</span>, field.key,</div>
<div class="line">                    (<span class="keywordtype">int</span>)field.v_slice.len, field.v_slice.data);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> <a name="a74"></a><a class="code" href="group__OIC.html#gga9d7655df4a9042b4e0dead83a2faac1ba229c76b57516c3d552107a6da5a28b15">SOL_OIC_REPR_TYPE_BYTE_STRING</a>:</div>
<div class="line">                <a class="code" href="iotivity-test-client_8c.html#a8a1f58eae723ccc14dad6808b9bef6d1">dump_byte_string</a>(&amp;buf, field.v_slice);</div>
<div class="line">                printf(<span class="stringliteral">&quot;\tkey: &#39;%s&#39;, value: bytestr{%.*s}\n&quot;</span>, field.key,</div>
<div class="line">                    <a class="code" href="group__Str__Slice.html#ga10c9d829c4d0c50467106a14190d7611">SOL_STR_SLICE_PRINT</a>(<a class="code" href="group__Buffer.html#ga8514e78d12dbe8c959af39de05f7c547">sol_buffer_get_slice</a>(&amp;buf)));</div>
<div class="line"></div>
<div class="line">                <a name="a75"></a><a class="code" href="group__Buffer.html#ga957a46b424be4d7b7f044a2156120253">sol_buffer_fini</a>(&amp;buf);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> <a name="a76"></a><a class="code" href="group__OIC.html#gga9d7655df4a9042b4e0dead83a2faac1ba965d94d8eb5bf63f59eec3248cfb2ffc">SOL_OIC_REPR_TYPE_HALF_FLOAT</a>:</div>
<div class="line">                printf(<span class="stringliteral">&quot;\tkey: &#39;%s&#39;, value: hfloat(%p)\n&quot;</span>, field.key,</div>
<div class="line">                    field.v_voidptr);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> <a name="a77"></a><a class="code" href="group__OIC.html#gga9d7655df4a9042b4e0dead83a2faac1bad9b9e3c55af9a44db19d5dabd7a2dcfb">SOL_OIC_REPR_TYPE_FLOAT</a>:</div>
<div class="line">                printf(<span class="stringliteral">&quot;\tkey: &#39;%s&#39;, value: float(%f)\n&quot;</span>, field.key,</div>
<div class="line">                    field.v_float);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> <a name="a78"></a><a class="code" href="group__OIC.html#gga9d7655df4a9042b4e0dead83a2faac1ba19bcfeb0854b4af0c3ec0e33caa945c7">SOL_OIC_REPR_TYPE_DOUBLE</a>:</div>
<div class="line">                printf(<span class="stringliteral">&quot;\tkey: &#39;%s&#39;, value: float(%g)\n&quot;</span>, field.key,</div>
<div class="line">                    field.v_double);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="group__OIC.html#gga9d7655df4a9042b4e0dead83a2faac1baac85764c587e252e2f70380a1ab3e2b9">SOL_OIC_REPR_TYPE_BOOL</a>:</div>
<div class="line">                printf(<span class="stringliteral">&quot;\tkey: &#39;%s&#39;, value: boolean(%s)\n&quot;</span>, field.key,</div>
<div class="line">                    field.v_boolean ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> <a name="a79"></a><a class="code" href="group__OIC.html#gga9d7655df4a9042b4e0dead83a2faac1ba71306f82d944d0d020ea4c987ae88382">SOL_OIC_REPR_TYPE_UNSUPPORTED</a>:</div>
<div class="line">                printf(<span class="stringliteral">&quot;\tkey: &#39;%s&#39;, value: unsupported cbor code(%&quot;</span> PRIi64 <span class="stringliteral">&quot;)\n&quot;</span>,</div>
<div class="line">                    field.key, field.v_int);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">default</span>:</div>
<div class="line">                printf(<span class="stringliteral">&quot;\tkey: &#39;%s&#39;, value: unknown(%d)\n&quot;</span>, field.key, field.type);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        printf(<span class="stringliteral">&quot;}\n\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (ctx-&gt;<a class="code" href="structContext.html#afb90ec1e3a5a8ec5b8e73dcb16a0e30f">test_number</a> == <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a47270ff043bfdf74b49acd95489d5f48">TEST_NON_CONFIRMABLE_PUT</a>) {</div>
<div class="line">        request = <a class="code" href="group__oic__client.html#ga23015c9be4cfbafe560cbdd781a2ef66">sol_oic_client_request_new</a>(<a class="code" href="group__CoAP.html#ggac60a0d3f433460b1ead192bc3718bbe3aaa7f46a2ace5e189c25fe7245082f0cb">SOL_COAP_METHOD_GET</a>, ctx-&gt;<a class="code" href="structContext.html#ac793e39ff754d67b60b00b2872572a01">res</a>);</div>
<div class="line">        <span class="keywordflow">if</span> (!request)</div>
<div class="line">            <span class="keywordflow">goto</span> error;</div>
<div class="line">        <a class="code" href="group__oic__client.html#gab07a6cde716a528e10fa45f91b83480a">sol_oic_client_request</a>(cli, request, <a class="code" href="iotivity-test-client_8c.html#ad5973b64e1f0d06e8a8edffe366ab3b0">check_put_request</a>, NULL);</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ctx-&gt;<a class="code" href="structContext.html#afb90ec1e3a5a8ec5b8e73dcb16a0e30f">test_number</a> == <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a5c96bcc5a854cc9978b5183d780c4a1c">TEST_NON_CONFIRMABLE_POST</a> ||</div>
<div class="line">        ctx-&gt;<a class="code" href="structContext.html#afb90ec1e3a5a8ec5b8e73dcb16a0e30f">test_number</a> == <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65af74e93e7cb391ef4a602c4851d9b326c">TEST_CONFIRMABLE_POST</a>) {</div>
<div class="line">        request = <a class="code" href="group__oic__client.html#ga23015c9be4cfbafe560cbdd781a2ef66">sol_oic_client_request_new</a>(<a class="code" href="group__CoAP.html#ggac60a0d3f433460b1ead192bc3718bbe3aaa7f46a2ace5e189c25fe7245082f0cb">SOL_COAP_METHOD_GET</a>, ctx-&gt;<a class="code" href="structContext.html#ac793e39ff754d67b60b00b2872572a01">res</a>);</div>
<div class="line">        <span class="keywordflow">if</span> (!request)</div>
<div class="line">            <span class="keywordflow">goto</span> error;</div>
<div class="line">        <a class="code" href="group__oic__client.html#gab07a6cde716a528e10fa45f91b83480a">sol_oic_client_request</a>(cli, request, <a class="code" href="iotivity-test-client_8c.html#a70898bfb7745fcfd29abdbd06fdd708e">check_post_request</a>, NULL);</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (map_reader)</div>
<div class="line">        <a class="code" href="group__Mainloop.html#ga56c31320e4348c91a719039b5a22dd25">sol_quit</a>();</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">error:</div>
<div class="line">        printf(<span class="stringliteral">&quot;Invalid response: empty payload.\n&quot;</span>);</div>
<div class="line">        <a class="code" href="group__Mainloop.html#gab1deec1c7e4da3b7b8caeafe9369b816">sol_quit_with_code</a>(EXIT_FAILURE);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line"><a name="a80"></a><a class="code" href="iotivity-test-client_8c.html#a9c7ece48e7da4ceb8f7261e1ad5a7a4c">server_info_cb</a>(<span class="keywordtype">void</span> *data, <span class="keyword">struct</span> <a class="code" href="group__oic__client.html#ga1a360ce1883b3ccd420145b17cefc99f">sol_oic_client</a> *cli, <span class="keyword">const</span> <span class="keyword">struct</span> <a name="_a81"></a><a class="code" href="structsol__oic__device__info.html">sol_oic_device_info</a> *info)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">char</span> device_id[<a class="code" href="iotivity-test-client_8c.html#a108827ef5ba796ac6b9fffd6b6048353">DEVICE_ID_LEN</a> * 2];</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (info == NULL) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;No device found.\n&quot;</span>);</div>
<div class="line">        <a class="code" href="group__Mainloop.html#gab1deec1c7e4da3b7b8caeafe9369b816">sol_quit_with_code</a>(EXIT_FAILURE);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="iotivity-test-client_8c.html#a05beee9e7c8c8cda96ad216b350bf226">device_id_decode</a>(info-&gt;<a name="a82"></a><a class="code" href="structsol__oic__device__info.html#a2b96d95d6b0a92f2324a6d916c56994c">device_id</a>.<a class="code" href="structsol__str__slice.html#a38ae63b741a375104ae7cc3a5da911a4">data</a>, device_id);</div>
<div class="line">    printf(<span class="stringliteral">&quot;Found Device:\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot; - Device ID: %.*s\n&quot;</span>, <a class="code" href="iotivity-test-client_8c.html#a108827ef5ba796ac6b9fffd6b6048353">DEVICE_ID_LEN</a> * 2, device_id);</div>
<div class="line">    printf(<span class="stringliteral">&quot; - Device name: %.*s\n&quot;</span>, <a class="code" href="group__Str__Slice.html#ga10c9d829c4d0c50467106a14190d7611">SOL_STR_SLICE_PRINT</a>(info-&gt;<a name="a83"></a><a class="code" href="structsol__oic__device__info.html#abff00a9728bc5952f91c7e8a1189caef">device_name</a>));</div>
<div class="line">    printf(<span class="stringliteral">&quot; - Spec version: %.*s\n&quot;</span>, <a class="code" href="group__Str__Slice.html#ga10c9d829c4d0c50467106a14190d7611">SOL_STR_SLICE_PRINT</a>(info-&gt;<a name="a84"></a><a class="code" href="structsol__oic__device__info.html#a3e309755fac8f006a1f5313090f426e6">spec_version</a>));</div>
<div class="line">    printf(<span class="stringliteral">&quot; - Data model version: %.*s\n&quot;</span>,</div>
<div class="line">        <a class="code" href="group__Str__Slice.html#ga10c9d829c4d0c50467106a14190d7611">SOL_STR_SLICE_PRINT</a>(info-&gt;<a name="a85"></a><a class="code" href="structsol__oic__device__info.html#ac9bca6b71655d225ce09ffd5de5f4e6c">data_model_version</a>));</div>
<div class="line">    <a class="code" href="group__Mainloop.html#ga56c31320e4348c91a719039b5a22dd25">sol_quit</a>();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line"><a name="a86"></a><a class="code" href="iotivity-test-client_8c.html#a610c93fddb16b691ad7e81e26f30389c">platform_info_cb</a>(<span class="keywordtype">void</span> *data, <span class="keyword">struct</span> <a class="code" href="group__oic__client.html#ga1a360ce1883b3ccd420145b17cefc99f">sol_oic_client</a> *cli, <span class="keyword">const</span> <span class="keyword">struct</span> <a name="_a87"></a><a class="code" href="structsol__oic__platform__info.html">sol_oic_platform_info</a> *info)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (info == NULL) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;No platform found.\n&quot;</span>);</div>
<div class="line">        <a class="code" href="group__Mainloop.html#gab1deec1c7e4da3b7b8caeafe9369b816">sol_quit_with_code</a>(EXIT_FAILURE);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    printf(<span class="stringliteral">&quot;Found Platform:\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot; - Platform ID: %.*s\n&quot;</span>, <a class="code" href="group__Str__Slice.html#ga10c9d829c4d0c50467106a14190d7611">SOL_STR_SLICE_PRINT</a>(info-&gt;<a name="a88"></a><a class="code" href="structsol__oic__platform__info.html#a9555cea4ed67fa1cbbcb86e90c8c86d3">platform_id</a>));</div>
<div class="line">    printf(<span class="stringliteral">&quot; - Manufacturer name: %.*s\n&quot;</span>,</div>
<div class="line">        <a class="code" href="group__Str__Slice.html#ga10c9d829c4d0c50467106a14190d7611">SOL_STR_SLICE_PRINT</a>(info-&gt;<a name="a89"></a><a class="code" href="structsol__oic__platform__info.html#a7f91dd9f59133e38486d9ae19662e194">manufacturer_name</a>));</div>
<div class="line">    printf(<span class="stringliteral">&quot; - Manufacturer URL: %.*s\n&quot;</span>,</div>
<div class="line">        <a class="code" href="group__Str__Slice.html#ga10c9d829c4d0c50467106a14190d7611">SOL_STR_SLICE_PRINT</a>(info-&gt;<a name="a90"></a><a class="code" href="structsol__oic__platform__info.html#af1265ae67c800dfc6b8b4d3e1b9cceb2">manufacturer_url</a>));</div>
<div class="line">    printf(<span class="stringliteral">&quot; - Model Number: %.*s\n&quot;</span>, <a class="code" href="group__Str__Slice.html#ga10c9d829c4d0c50467106a14190d7611">SOL_STR_SLICE_PRINT</a>(info-&gt;<a name="a91"></a><a class="code" href="structsol__oic__platform__info.html#a19b9349d3e4d272eb7e94207a9229ba5">model_number</a>));</div>
<div class="line">    printf(<span class="stringliteral">&quot; - Manufacturer date: %.*s\n&quot;</span>,</div>
<div class="line">        <a class="code" href="group__Str__Slice.html#ga10c9d829c4d0c50467106a14190d7611">SOL_STR_SLICE_PRINT</a>(info-&gt;<a name="a92"></a><a class="code" href="structsol__oic__platform__info.html#ac6cdca64af6bc453ae1251e054b6c7d1">manufacture_date</a>));</div>
<div class="line">    printf(<span class="stringliteral">&quot; - Plafform version: %.*s\n&quot;</span>,</div>
<div class="line">        <a class="code" href="group__Str__Slice.html#ga10c9d829c4d0c50467106a14190d7611">SOL_STR_SLICE_PRINT</a>(info-&gt;<a name="a93"></a><a class="code" href="structsol__oic__platform__info.html#a32c4ec1932362343a91f2741ad180f19">platform_version</a>));</div>
<div class="line">    printf(<span class="stringliteral">&quot; - Hardware version: %.*s\n&quot;</span>,</div>
<div class="line">        <a class="code" href="group__Str__Slice.html#ga10c9d829c4d0c50467106a14190d7611">SOL_STR_SLICE_PRINT</a>(info-&gt;<a name="a94"></a><a class="code" href="structsol__oic__platform__info.html#a9b12a8834b31ee9545d021f0fee3e9ca">hardware_version</a>));</div>
<div class="line">    printf(<span class="stringliteral">&quot; - Firmware version: %.*s\n&quot;</span>,</div>
<div class="line">        <a class="code" href="group__Str__Slice.html#ga10c9d829c4d0c50467106a14190d7611">SOL_STR_SLICE_PRINT</a>(info-&gt;<a name="a95"></a><a class="code" href="structsol__oic__platform__info.html#ac79084c6cecb5ac05a433f9428a44d67">firmware_version</a>));</div>
<div class="line">    printf(<span class="stringliteral">&quot; - Support URL: %.*s\n&quot;</span>, <a class="code" href="group__Str__Slice.html#ga10c9d829c4d0c50467106a14190d7611">SOL_STR_SLICE_PRINT</a>(info-&gt;<a name="a96"></a><a class="code" href="structsol__oic__platform__info.html#abddcc2be3ad8e808437b6ce2dae07b3c">support_url</a>));</div>
<div class="line">    <a class="code" href="group__Mainloop.html#ga56c31320e4348c91a719039b5a22dd25">sol_quit</a>();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line"><a name="a97"></a><a class="code" href="iotivity-test-client_8c.html#a0ff00e7d2c8b31540dddf2775f3eb670">put_fill_repr_map</a>(<span class="keyword">struct</span> <a class="code" href="group__OIC.html#ga44c3b063a667be23483a298426d2b956">sol_oic_map_writer</a> *repr_map)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> r;</div>
<div class="line"></div>
<div class="line">    r = <a class="code" href="group__OIC.html#ga82777dd759a62e7d016816a3f082964c">sol_oic_map_append</a>(repr_map,</div>
<div class="line">        &amp;<a name="a98"></a><a class="code" href="group__OIC.html#ga2e3acfbb012ad3c8231ccf7fda90156d">SOL_OIC_REPR_BOOL</a>(<span class="stringliteral">&quot;state&quot;</span>, <span class="keyword">true</span>));</div>
<div class="line">    <a name="a99"></a><a class="code" href="group__Log.html#ga8b7a2ba17c9bf66ad98238f0ca591413">SOL_INT_CHECK</a>(r, &lt; 0, r);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> <a class="code" href="group__OIC.html#ga82777dd759a62e7d016816a3f082964c">sol_oic_map_append</a>(repr_map,</div>
<div class="line">        &amp;<a class="code" href="group__OIC.html#ga39dc553046a16682d35e0ed577227284">SOL_OIC_REPR_INT</a>(<span class="stringliteral">&quot;power&quot;</span>, <a class="code" href="iotivity-test-client_8c.html#a201195bd5b0e25f84b2b13718734979e">PUT_REQUEST_POWER</a>));</div>
<div class="line"></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">bool</span></div>
<div class="line"><a class="code" href="iotivity-test-client_8c.html#a6cc09e22b723e2987b025a998783466f">found_resource</a>(<span class="keywordtype">void</span> *data,</div>
<div class="line">    <span class="keyword">struct</span> <a class="code" href="group__oic__client.html#ga1a360ce1883b3ccd420145b17cefc99f">sol_oic_client</a> *cli,</div>
<div class="line">    <span class="keyword">struct</span> <a class="code" href="structsol__oic__resource.html">sol_oic_resource</a> *res)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structContext.html">Context</a> *ctx = data;</div>
<div class="line">    <span class="keywordtype">bool</span> non_confirmable = <span class="keyword">false</span>, observe = <span class="keyword">false</span>;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *method_str = <span class="stringliteral">&quot;GET&quot;</span>;</div>
<div class="line">    <span class="keyword">enum</span> <a class="code" href="group__CoAP.html#gac60a0d3f433460b1ead192bc3718bbe3">sol_coap_method</a> method = <a class="code" href="group__CoAP.html#ggac60a0d3f433460b1ead192bc3718bbe3aaa7f46a2ace5e189c25fe7245082f0cb">SOL_COAP_METHOD_GET</a>;</div>
<div class="line"></div>
<div class="line">    int (*fill_repr_map)(<span class="keyword">struct </span><a class="code" href="group__OIC.html#ga44c3b063a667be23483a298426d2b956">sol_oic_map_writer</a> *repr_map) = NULL;</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structsol__str__slice.html">sol_str_slice</a> path;</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="group__OIC.html#ga491ed65dbd122beb10ab23bceda44900">sol_oic_request</a> *request;</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structsol__str__slice.html">sol_str_slice</a> *path_ptr = (<span class="keyword">struct </span><a class="code" href="structsol__str__slice.html">sol_str_slice</a> *)&amp;res-&gt;<a class="code" href="structsol__oic__resource.html#a5405aebaa7bb9e83aaca55a35f34e362">path</a>;</div>
<div class="line"></div>
<div class="line">    if (!res)</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!<a class="code" href="iotivity-test-client_8c.html#af55e2fb7249a370e69086939b24e838b">found_resource_print</a>(data, cli, res))</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"></div>
<div class="line">    ctx-&gt;<a class="code" href="structContext.html#ac793e39ff754d67b60b00b2872572a01">res</a> = <a name="a100"></a><a class="code" href="group__oic__client.html#gac973947ad4d0512072722aa94b215d43">sol_oic_resource_ref</a>(res);</div>
<div class="line">    <span class="keywordflow">if</span> (!ctx-&gt;<a class="code" href="structContext.html#ac793e39ff754d67b60b00b2872572a01">res</a>) {</div>
<div class="line">        <a class="code" href="group__Mainloop.html#gab1deec1c7e4da3b7b8caeafe9369b816">sol_quit_with_code</a>(EXIT_FAILURE);</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">switch</span> (ctx-&gt;<a class="code" href="structContext.html#afb90ec1e3a5a8ec5b8e73dcb16a0e30f">test_number</a>) {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a564f501f2ad7ccefbfc1a5645c7c44c7">TEST_NON_CONFIRMABLE_GET</a>:</div>
<div class="line">        non_confirmable = <span class="keyword">true</span>;</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a47270ff043bfdf74b49acd95489d5f48">TEST_NON_CONFIRMABLE_PUT</a>:</div>
<div class="line">        method_str = <span class="stringliteral">&quot;PUT&quot;</span>;</div>
<div class="line">        method = <a name="a101"></a><a class="code" href="group__CoAP.html#ggac60a0d3f433460b1ead192bc3718bbe3a4b1e4bafb89fdb59f5c7c817b9c752b9">SOL_COAP_METHOD_PUT</a>;</div>
<div class="line">        non_confirmable = <span class="keyword">true</span>;</div>
<div class="line">        fill_repr_map = <a class="code" href="iotivity-test-client_8c.html#a0ff00e7d2c8b31540dddf2775f3eb670">put_fill_repr_map</a>;</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a5c96bcc5a854cc9978b5183d780c4a1c">TEST_NON_CONFIRMABLE_POST</a>:</div>
<div class="line">        method_str = <span class="stringliteral">&quot;POST&quot;</span>;</div>
<div class="line">        method = <a name="a102"></a><a class="code" href="group__CoAP.html#ggac60a0d3f433460b1ead192bc3718bbe3a47d19f443d3a497b8ef28ff223c00e2f">SOL_COAP_METHOD_POST</a>;</div>
<div class="line">        non_confirmable = <span class="keyword">true</span>;</div>
<div class="line">        fill_repr_map = <a class="code" href="iotivity-test-client_8c.html#a6b82dc1fc9da23c525bd833577938f35">post_fill_repr_map</a>;</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65ae72b641675bb8306a28fd919718fbc62">TEST_NON_CONFIRMABLE_DELETE</a>:</div>
<div class="line">        method_str = <span class="stringliteral">&quot;DELETE&quot;</span>;</div>
<div class="line">        method = <a name="a103"></a><a class="code" href="group__CoAP.html#ggac60a0d3f433460b1ead192bc3718bbe3ab5679f3a4b40ddfe63c3c822178954d3">SOL_COAP_METHOD_DELETE</a>;</div>
<div class="line">        non_confirmable = <span class="keyword">true</span>;</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a550d08097f058c8462791842f9234f02">TEST_NON_CONFIRMABLE_OBSERVE</a>:</div>
<div class="line">        method_str = <span class="stringliteral">&quot;OBSERVE&quot;</span>;</div>
<div class="line">        non_confirmable = <span class="keyword">true</span>;</div>
<div class="line">        observe = <span class="keyword">true</span>;</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65af87987f0cbd571bfe5dd9d5fafb4e185">TEST_NON_CONFIRMABLE_INVALID_GET</a>:</div>
<div class="line">        non_confirmable = <span class="keyword">true</span>;</div>
<div class="line">        method_str = <span class="stringliteral">&quot;invalid GET&quot;</span>;</div>
<div class="line">        path = res-&gt;<a class="code" href="structsol__oic__resource.html#a5405aebaa7bb9e83aaca55a35f34e362">path</a>;</div>
<div class="line">        <span class="comment">//XXX: hack</span></div>
<div class="line">        *path_ptr = <a name="a104"></a><a class="code" href="group__Str__Slice.html#ga403d23f24219db595e892573d3384c37">sol_str_slice_from_str</a>(<span class="stringliteral">&quot;/SomeUnknownResource&quot;</span>);</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a2a1a7b94759753173e9b572b83fd43ca">TEST_CONFIRMABLE_GET</a>:</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65af74e93e7cb391ef4a602c4851d9b326c">TEST_CONFIRMABLE_POST</a>:</div>
<div class="line">        method_str = <span class="stringliteral">&quot;POST&quot;</span>;</div>
<div class="line">        method = <a class="code" href="group__CoAP.html#ggac60a0d3f433460b1ead192bc3718bbe3a47d19f443d3a497b8ef28ff223c00e2f">SOL_COAP_METHOD_POST</a>;</div>
<div class="line">        fill_repr_map = <a class="code" href="iotivity-test-client_8c.html#a6b82dc1fc9da23c525bd833577938f35">post_fill_repr_map</a>;</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65aa60eef8d75b3d462d63e3d2fd8059696">TEST_CONFIRMABLE_DELETE</a>:</div>
<div class="line">        method_str = <span class="stringliteral">&quot;DELETE&quot;</span>;</div>
<div class="line">        method = <a class="code" href="group__CoAP.html#ggac60a0d3f433460b1ead192bc3718bbe3ab5679f3a4b40ddfe63c3c822178954d3">SOL_COAP_METHOD_DELETE</a>;</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a92aeab7eaab18d33bb914e43eafa93bf">TEST_CONFIRMABLE_OBSERVE</a>:</div>
<div class="line">        method_str = <span class="stringliteral">&quot;OBSERVE&quot;</span>;</div>
<div class="line">        observe = <span class="keyword">true</span>;</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">        printf(<span class="stringliteral">&quot;Invalid test\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">goto</span> error;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    printf(<span class="stringliteral">&quot;Issuing %sconfirmable %s on resource %.*s\n&quot;</span>,</div>
<div class="line">        non_confirmable ? <span class="stringliteral">&quot;non-&quot;</span> : <span class="stringliteral">&quot;&quot;</span>, method_str,</div>
<div class="line">        <a class="code" href="group__Str__Slice.html#ga10c9d829c4d0c50467106a14190d7611">SOL_STR_SLICE_PRINT</a>(res-&gt;<a class="code" href="structsol__oic__resource.html#a5405aebaa7bb9e83aaca55a35f34e362">path</a>));</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (observe) {</div>
<div class="line">        <span class="keywordflow">if</span> (non_confirmable)</div>
<div class="line">            <a name="a105"></a><a class="code" href="group__oic__client.html#ga28cab10e0c0e627c950bf41ac6d5a902">sol_oic_client_resource_set_observable</a></div>
<div class="line">                (cli, res, <a class="code" href="iotivity-test-client_8c.html#a288da8b2554af5cd71a24d93bbf7c420">resource_notify</a>,</div>
<div class="line">                data, <span class="keyword">true</span>);</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            <a name="a106"></a><a class="code" href="group__oic__client.html#ga8bcf6afdbccdbec42990fe3775127be2">sol_oic_client_resource_set_observable_non_confirmable</a></div>
<div class="line">                (cli, res, <a class="code" href="iotivity-test-client_8c.html#a288da8b2554af5cd71a24d93bbf7c420">resource_notify</a>,</div>
<div class="line">                data, <span class="keyword">true</span>);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">if</span> (non_confirmable) {</div>
<div class="line">            request = <a class="code" href="group__oic__client.html#ga23015c9be4cfbafe560cbdd781a2ef66">sol_oic_client_request_new</a>(method, res);</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            request = <a name="a107"></a><a class="code" href="group__oic__client.html#gab91e6d0a44556d14cb81f1d2f51e9a25">sol_oic_client_non_confirmable_request_new</a>(method, res);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (fill_repr_map)</div>
<div class="line">            fill_repr_map(<a name="a108"></a><a class="code" href="group__oic__client.html#ga61187b3485b238b6fab3eb3f05db2ef6">sol_oic_client_request_get_writer</a>(request));</div>
<div class="line">        <a class="code" href="group__oic__client.html#gab07a6cde716a528e10fa45f91b83480a">sol_oic_client_request</a>(cli, request, <a class="code" href="iotivity-test-client_8c.html#aed751137db1e85b968e1268d079f4180">print_response</a>, data);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (ctx-&gt;<a class="code" href="structContext.html#afb90ec1e3a5a8ec5b8e73dcb16a0e30f">test_number</a> == <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65af87987f0cbd571bfe5dd9d5fafb4e185">TEST_NON_CONFIRMABLE_INVALID_GET</a>)</div>
<div class="line">        *path_ptr = path;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"></div>
<div class="line">error:</div>
<div class="line">    <a name="a109"></a><a class="code" href="group__oic__client.html#gac30349b73208dcd49cc2cf322b491ecd">sol_oic_resource_unref</a>(res);</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line"><a name="a110"></a><a class="code" href="iotivity-test-client_8c.html#ad96d407a911fbb914fa8e4cfbf2faf0f">usage</a>(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    printf(<span class="stringliteral">&quot;iotivity-test-client uses same test numbers used in occlient &quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;sample from iotivity.\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;Usage : iotivity-test-client &lt;1..20&gt;\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;1  :  Just discover resources.\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;2  :  Non-confirmable GET Request\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;3  :  Unsupported\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;4  :  Non-confirmable PUT Requests\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;5  :  Non-confirmable POST Requests\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;6  :  Non-confirmable DELETE Requests\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;7  :  Non-confirmable OBSERVE Requests\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;8  :  Non-confirmable GET Request for an unavailable resource\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;9  :  Confirmable GET Request\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;10 :  Confirmable POST Request\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;11 :  Confirmable DELETE Requests\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;12 :  Confirmable OBSERVE Requests\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;13 :  Unsupported\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;14 :  Unsupported\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;15 :  Unsupported\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;16 :  Unsupported\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;17 :  Unsupported\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;18 :  Unsupported\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;19 :  Discover Platforms\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;20 :  Discover Devices\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span></div>
<div class="line"><a name="a111"></a><a class="code" href="iotivity-test-client_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structContext.html">Context</a> ctx;</div>
<div class="line">    <span class="keywordtype">int</span> ret;</div>
<div class="line"></div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="group__oic__client.html#ga1a360ce1883b3ccd420145b17cefc99f">sol_oic_client</a> *client;</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structsol__network__link__addr.html">sol_network_link_addr</a> cliaddr = { .<a name="a112"></a><a class="code" href="structsol__network__link__addr.html#a8812ee913f288398a3f30ac7e9c8bc50">family</a> = <a name="a113"></a><a class="code" href="group__Network.html#gga04f6e687ec8db41171a71d98d5b8e4f2a235f823da2b4622fa48a4d8f19a55fff">SOL_NETWORK_FAMILY_INET</a>, .port = 5683 };</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *resource_type = NULL;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *interface_type = NULL;</div>
<div class="line"></div>
<div class="line">    bool (*found_resource_cb)(<span class="keywordtype">void</span> *data, <span class="keyword">struct </span><a class="code" href="group__oic__client.html#ga1a360ce1883b3ccd420145b17cefc99f">sol_oic_client</a> *cli, <span class="keyword">struct </span><a class="code" href="structsol__oic__resource.html">sol_oic_resource</a> *res) = NULL;</div>
<div class="line"></div>
<div class="line">    ctx.<a class="code" href="structContext.html#ac793e39ff754d67b60b00b2872572a01">res</a> = NULL;</div>
<div class="line">    <a name="a114"></a><a class="code" href="group__Mainloop.html#ga2b7881c0cfcf1516e99a57949987425c">sol_init</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (argc &lt; 2) {</div>
<div class="line">        <a class="code" href="iotivity-test-client_8c.html#ad96d407a911fbb914fa8e4cfbf2faf0f">usage</a>();</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    ctx.<a class="code" href="structContext.html#afb90ec1e3a5a8ec5b8e73dcb16a0e30f">test_number</a> = atoi(argv[1]);</div>
<div class="line">    <span class="keywordflow">if</span> (ctx.<a class="code" href="structContext.html#afb90ec1e3a5a8ec5b8e73dcb16a0e30f">test_number</a> &lt; 1 || ctx.<a class="code" href="structContext.html#afb90ec1e3a5a8ec5b8e73dcb16a0e30f">test_number</a> &gt; 20) {</div>
<div class="line">        <a class="code" href="iotivity-test-client_8c.html#ad96d407a911fbb914fa8e4cfbf2faf0f">usage</a>();</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (argc &gt;= 3 &amp;&amp; argv[2][0])</div>
<div class="line">        resource_type = argv[2];</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (argc &gt;= 4 &amp;&amp; argv[3][0])</div>
<div class="line">        interface_type = argv[3];</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!<a name="a115"></a><a class="code" href="group__Network.html#gae2e58f688cf87b4f394b2818be76f30b">sol_network_link_addr_from_str</a>(&amp;cliaddr, <span class="stringliteral">&quot;224.0.1.187&quot;</span>)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;could not convert multicast ip address to sockaddr_in\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">switch</span> (ctx.<a class="code" href="structContext.html#afb90ec1e3a5a8ec5b8e73dcb16a0e30f">test_number</a>) {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a5003fab5d3dea637a1e839a190aa8880">TEST_DISCOVERY</a>:</div>
<div class="line">        found_resource_cb = <a class="code" href="iotivity-test-client_8c.html#af55e2fb7249a370e69086939b24e838b">found_resource_print</a>;</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a564f501f2ad7ccefbfc1a5645c7c44c7">TEST_NON_CONFIRMABLE_GET</a>:</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a47270ff043bfdf74b49acd95489d5f48">TEST_NON_CONFIRMABLE_PUT</a>:</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a5c96bcc5a854cc9978b5183d780c4a1c">TEST_NON_CONFIRMABLE_POST</a>:</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65ae72b641675bb8306a28fd919718fbc62">TEST_NON_CONFIRMABLE_DELETE</a>:</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a550d08097f058c8462791842f9234f02">TEST_NON_CONFIRMABLE_OBSERVE</a>:</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65af87987f0cbd571bfe5dd9d5fafb4e185">TEST_NON_CONFIRMABLE_INVALID_GET</a>:</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a2a1a7b94759753173e9b572b83fd43ca">TEST_CONFIRMABLE_GET</a>:</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65af74e93e7cb391ef4a602c4851d9b326c">TEST_CONFIRMABLE_POST</a>:</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65aa60eef8d75b3d462d63e3d2fd8059696">TEST_CONFIRMABLE_DELETE</a>:</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a92aeab7eaab18d33bb914e43eafa93bf">TEST_CONFIRMABLE_OBSERVE</a>:</div>
<div class="line">        found_resource_cb = <a class="code" href="iotivity-test-client_8c.html#a6cc09e22b723e2987b025a998783466f">found_resource</a>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a80134522cda11b68e49a751dc3fd55cf">TEST_DISCOVER_PLATFORM</a>:</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a2b46b79cfd5c89884a9e12d84de08cef">TEST_DISCOVER_DEVICES</a>:</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">        printf(<span class="stringliteral">&quot;Unsupported test.\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    client = <a name="a116"></a><a class="code" href="group__oic__client.html#gac216a7841285744023d7591ddf108b91">sol_oic_client_new</a>();</div>
<div class="line">    <span class="keywordflow">if</span> (ctx.<a class="code" href="structContext.html#afb90ec1e3a5a8ec5b8e73dcb16a0e30f">test_number</a> == <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a80134522cda11b68e49a751dc3fd55cf">TEST_DISCOVER_PLATFORM</a>)</div>
<div class="line">        <a name="a117"></a><a class="code" href="group__oic__client.html#ga897bbde8369d957aebbe5d40aa966907">sol_oic_client_get_platform_info_by_addr</a>(client, &amp;cliaddr,</div>
<div class="line">            <a class="code" href="iotivity-test-client_8c.html#a610c93fddb16b691ad7e81e26f30389c">platform_info_cb</a>, NULL);</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ctx.<a class="code" href="structContext.html#afb90ec1e3a5a8ec5b8e73dcb16a0e30f">test_number</a> == <a class="code" href="iotivity-test-client_8c.html#a4c1f72a7af9ca8d7f2d124f5a3ea1f65a2b46b79cfd5c89884a9e12d84de08cef">TEST_DISCOVER_DEVICES</a>)</div>
<div class="line">        <a name="a118"></a><a class="code" href="group__oic__client.html#gaca21ac26f633c0bff54a432704b54fee">sol_oic_client_get_server_info_by_addr</a>(client, &amp;cliaddr,</div>
<div class="line">            <a class="code" href="iotivity-test-client_8c.html#a9c7ece48e7da4ceb8f7261e1ad5a7a4c">server_info_cb</a>, NULL);</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        <a name="a119"></a><a class="code" href="group__oic__client.html#ga9ce1069e8841478f8dab7aad99a0f297">sol_oic_client_find_resources</a>(client, &amp;cliaddr, resource_type,</div>
<div class="line">            interface_type, found_resource_cb, &amp;ctx);</div>
<div class="line"></div>
<div class="line">    ret = <a name="a120"></a><a class="code" href="group__Mainloop.html#ga40ef0e2ee61ea7a548c00bbae980408b">sol_run</a>();</div>
<div class="line"></div>
<div class="line">    <a name="a121"></a><a class="code" href="group__oic__client.html#ga4388805f09e88cb9d380cc1f3b07ec8a">sol_oic_client_del</a>(client);</div>
<div class="line">    <span class="keywordflow">if</span> (ctx.<a class="code" href="structContext.html#ac793e39ff754d67b60b00b2872572a01">res</a>)</div>
<div class="line">        <a class="code" href="group__oic__client.html#gac30349b73208dcd49cc2cf322b491ecd">sol_oic_resource_unref</a>(ctx.<a class="code" href="structContext.html#ac793e39ff754d67b60b00b2872572a01">res</a>);</div>
<div class="line">    <span class="keywordflow">return</span> ret;</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
<a href="http://solettaproject.github.io/docs/">Full online documentation</a> | 
<a href="index.html">C API Index</a>
</small></address>
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
