<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Soletta™ Framework: Message Digest (Hash)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Soletta™ Framework
   </div>
   <div id="projectbrief">
   Framework for making IoT devices<br /><br />
   <small>
   <a href="http://solettaproject.github.io/docs/">Full online documentation</a> | 
   <a href="index.html">C API Index</a>
   </small><br />
   </div>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Message Digest (Hash)<div class="ingroups"><a class="el" href="group__Crypto.html">Cryptography And Signatures</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Message Digest algorithms will take a byte stream and compute a hash that may be used to later validate the identity.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsol__message__digest__config.html">sol_message_digest_config</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The message digest configuration to use when creating a new handle.  <a href="structsol__message__digest__config.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gae8373e236c54650dd48b589abb7884ba"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="group__Message__Digest.html#gae8373e236c54650dd48b589abb7884ba">sol_message_digest</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Message__Digest.html#gae8373e236c54650dd48b589abb7884ba">sol_message_digest</a></td></tr>
<tr class="memdesc:gae8373e236c54650dd48b589abb7884ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">A handle for a message digest.  <a href="#gae8373e236c54650dd48b589abb7884ba">More...</a><br/></td></tr>
<tr class="separator:gae8373e236c54650dd48b589abb7884ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga30669c150468d7adac560efa5ffc5eb8"><td class="memItemLeft" align="right" valign="top">typedef struct <br class="typebreak"/>
<a class="el" href="structsol__message__digest__config.html">sol_message_digest_config</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Message__Digest.html#ga30669c150468d7adac560efa5ffc5eb8">sol_message_digest_config</a></td></tr>
<tr class="memdesc:ga30669c150468d7adac560efa5ffc5eb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">The message digest configuration to use when creating a new handle.  <a href="#ga30669c150468d7adac560efa5ffc5eb8">More...</a><br/></td></tr>
<tr class="separator:ga30669c150468d7adac560efa5ffc5eb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga5b8285c8f427c09ca3f0ee44277fcdf5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Message__Digest.html#ga5b8285c8f427c09ca3f0ee44277fcdf5">sol_message_digest_del</a> (struct <a class="el" href="group__Message__Digest.html#gae8373e236c54650dd48b589abb7884ba">sol_message_digest</a> *handle)</td></tr>
<tr class="memdesc:ga5b8285c8f427c09ca3f0ee44277fcdf5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a message digest handle.  <a href="#ga5b8285c8f427c09ca3f0ee44277fcdf5">More...</a><br/></td></tr>
<tr class="separator:ga5b8285c8f427c09ca3f0ee44277fcdf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6bd8e2b7f7f3994c7c105b77675e4d89"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Message__Digest.html#ga6bd8e2b7f7f3994c7c105b77675e4d89">sol_message_digest_feed</a> (struct <a class="el" href="group__Message__Digest.html#gae8373e236c54650dd48b589abb7884ba">sol_message_digest</a> *handle, struct <a class="el" href="structsol__blob.html">sol_blob</a> *input, bool is_last)</td></tr>
<tr class="memdesc:ga6bd8e2b7f7f3994c7c105b77675e4d89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Feed message (data) to be digested (hashed).  <a href="#ga6bd8e2b7f7f3994c7c105b77675e4d89">More...</a><br/></td></tr>
<tr class="separator:ga6bd8e2b7f7f3994c7c105b77675e4d89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga77cd1980741c2a8250c02c885105c48d"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="group__Message__Digest.html#gae8373e236c54650dd48b589abb7884ba">sol_message_digest</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Message__Digest.html#ga77cd1980741c2a8250c02c885105c48d">sol_message_digest_new</a> (const struct <a class="el" href="structsol__message__digest__config.html">sol_message_digest_config</a> *config)</td></tr>
<tr class="memdesc:ga77cd1980741c2a8250c02c885105c48d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new handle to feed the message to digest.  <a href="#ga77cd1980741c2a8250c02c885105c48d">More...</a><br/></td></tr>
<tr class="separator:ga77cd1980741c2a8250c02c885105c48d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Message Digest algorithms will take a byte stream and compute a hash that may be used to later validate the identity. </p>
<p>Even the smallest variation of the input data will have an avalanche effect that drastically change the output data.</p>
<p>Wikipedia says (<a href="https://en.wikipedia.org/wiki/Cryptographic_hash_function">https://en.wikipedia.org/wiki/Cryptographic_hash_function</a>): The ideal cryptographic hash function has four main properties:</p>
<ul>
<li>it is easy to compute the hash value for any given message</li>
<li>it is infeasible to generate a message from its hash</li>
<li>it is infeasible to modify a message without changing the hash</li>
<li>it is infeasible to find two different messages with the same hash.</li>
</ul>
<p>Common Message Digest algorithms are CRC32, MD5, SHA1, SHA256 and SHA512. Most of these are already broken, such as CRC32 and nowadays MD5 and even SHA1, then before picking one for your application, check the one that is more secure and hard to break, such as SHA512.</p>
<p>Soletta provides a portable API for message digests, but it doesn't implement any of them. The actual work is done by the engine underneath, which will depend on the build configuration. On Linux, either the kernel's crypo API or OpenSSL's crypto library are available to choose at build time. On RIOT-OS, only the algorithms provided by the OS are implemented. Other systems lack support currently.</p>
<p>When choosing an algorithm, Soletta will pass it down to the engine selected for use, and to keep applications portable, it was chosen to always follow the names used by the Linux kernel. If they don't match on other implementations, Soletta will translate accordingly, keeping those difference transparent for developers. </p>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="gae8373e236c54650dd48b589abb7884ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Message__Digest.html#gae8373e236c54650dd48b589abb7884ba">sol_message_digest</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A handle for a message digest. </p>

</div>
</div>
<a class="anchor" id="ga30669c150468d7adac560efa5ffc5eb8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structsol__message__digest__config.html">sol_message_digest_config</a>  <a class="el" href="structsol__message__digest__config.html">sol_message_digest_config</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The message digest configuration to use when creating a new handle. </p>
<dl class="section note"><dt>Note</dt><dd>Message digest follows the Soletta stream design pattern, which can be found here: <a class="el" href="patterns.html#streams">IO Streams</a> </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="group__Message__Digest.html#ga77cd1980741c2a8250c02c885105c48d" title="Create a new handle to feed the message to digest. ">sol_message_digest_new()</a> </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga5b8285c8f427c09ca3f0ee44277fcdf5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sol_message_digest_del </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="group__Message__Digest.html#gae8373e236c54650dd48b589abb7884ba">sol_message_digest</a> *&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a message digest handle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>the handle previously created with <a class="el" href="group__Message__Digest.html#ga77cd1980741c2a8250c02c885105c48d" title="Create a new handle to feed the message to digest. ">sol_message_digest_new()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="src_2samples_2crypto_2message-digest_8c-example.html#a21">/src/samples/crypto/message-digest.c</a>, and <a class="el" href="src_2samples_2crypto_2sha256sum_8c-example.html#a31">/src/samples/crypto/sha256sum.c</a>.</dd>
</dl>
<p>Referenced by <a class="el" href="sha256sum_8c.html#ac26fc8fb1234894a155ce26b75b57c64">entry_del()</a>, <a class="el" href="message-digest_8c.html#aba0408da6b1969a990e9e82ed7bfc7fa">on_digest_ready()</a>, and <a class="el" href="message-digest_8c.html#a8f65ca9f5a72be7fe776126fc632f8a9">startup()</a>.</p>

</div>
</div>
<a class="anchor" id="ga6bd8e2b7f7f3994c7c105b77675e4d89"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sol_message_digest_feed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="group__Message__Digest.html#gae8373e236c54650dd48b589abb7884ba">sol_message_digest</a> *&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structsol__blob.html">sol_blob</a> *&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_last</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Feed message (data) to be digested (hashed). </p>
<p>This is the core of the message digest as it will take chunks of data (message) to process and then produce the final hash (digest) at the end.</p>
<p>The message digest implementation is asynchronous to allow to offload computation to another unit such as hardware acceleration or a thread, not blocking the main thread while it happens. Thus the lifetime of input and output data must be clear, and struct <a class="el" href="structsol__blob.html" title="Data type describing the default blob implementation. ">sol_blob</a> is used to manage that.</p>
<p>After a chunk is fed with this function, it is queued for processing. Once that chunk is done, <code><a class="el" href="message-digest_8c.html#a1ca30c9c5f198c738b568cdf304f6bd8">on_feed_done()</a></code> is called with that information. This may be used to feed more data.</p>
<p>Once the last chunk is fed (<code>is_last=true</code> ), then the final digest is calculated and delivered by calling <code><a class="el" href="message-digest_8c.html#aba0408da6b1969a990e9e82ed7bfc7fa">on_digest_ready()</a></code> function provided via <code><a class="el" href="structsol__message__digest__config.html" title="The message digest configuration to use when creating a new handle. ">sol_message_digest_config</a></code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>the handle previously created with <a class="el" href="group__Message__Digest.html#ga77cd1980741c2a8250c02c885105c48d" title="Create a new handle to feed the message to digest. ">sol_message_digest_new()</a>. </td></tr>
    <tr><td class="paramname">input</td><td>the input data to be consumed. The blob will be referenced until data is processed and automatically unreferenced after the user callback <code>config-&gt;<a class="el" href="message-digest_8c.html#a1ca30c9c5f198c738b568cdf304f6bd8">on_feed_done()</a></code> returns. </td></tr>
    <tr><td class="paramname">is_last</td><td>indicates whenever this is the last input data chunk to be processed. Some algorithms operates on block size and must use padding if there is remaining data that is not of that size. After the last blob is processed, <code>config-&gt;<a class="el" href="message-digest_8c.html#aba0408da6b1969a990e9e82ed7bfc7fa">on_digest_ready()</a></code> is called with the resulting digest as a blob.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, <code>-ENOSPC</code> if <a class="el" href="structsol__message__digest__config.html#a036c16bb48f757b5d63655aa1eb86fdf" title="The feed buffer max size. ">sol_message_digest_config::feed_size</a> is not zero and there's no more space left or -errno on error. If error or -ENOPSC, If error, then the input reference is not taken. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Message digest follows the Soletta stream design pattern, which can be found here: <a class="el" href="patterns.html#streams">IO Streams</a> </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="src_2samples_2crypto_2message-digest_8c-example.html#a41">/src/samples/crypto/message-digest.c</a>, and <a class="el" href="src_2samples_2crypto_2sha256sum_8c-example.html#a42">/src/samples/crypto/sha256sum.c</a>.</dd>
</dl>
<p>Referenced by <a class="el" href="sha256sum_8c.html#a889b97a3ee7abee85e899fca893da399">hash_file()</a>, <a class="el" href="sha256sum_8c.html#afc7855e4b6972e4d50f909d42dd67776">on_stdin_hash()</a>, and <a class="el" href="message-digest_8c.html#a8f65ca9f5a72be7fe776126fc632f8a9">startup()</a>.</p>

</div>
</div>
<a class="anchor" id="ga77cd1980741c2a8250c02c885105c48d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="group__Message__Digest.html#gae8373e236c54650dd48b589abb7884ba">sol_message_digest</a>* sol_message_digest_new </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structsol__message__digest__config.html">sol_message_digest_config</a> *&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new handle to feed the message to digest. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>the configuration (algorithm, callbacks) to use.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a newly allocated handle on success or NULL on failure and errno is set. For instance if the algorithm is not supported, <code>ENOTSUP</code> if the algorithm is not supported.</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="group__Message__Digest.html#ga5b8285c8f427c09ca3f0ee44277fcdf5" title="Delete a message digest handle. ">sol_message_digest_del()</a> </dd>
<dd>
<a class="el" href="group__Message__Digest.html#ga6bd8e2b7f7f3994c7c105b77675e4d89" title="Feed message (data) to be digested (hashed). ">sol_message_digest_feed()</a> </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="src_2samples_2crypto_2message-digest_8c-example.html#a40">/src/samples/crypto/message-digest.c</a>, and <a class="el" href="src_2samples_2crypto_2sha256sum_8c-example.html#a28">/src/samples/crypto/sha256sum.c</a>.</dd>
</dl>
<p>Referenced by <a class="el" href="sha256sum_8c.html#a0b6dc85b9d612a8f9a9462d399b9e5ec">entry_new()</a>, and <a class="el" href="message-digest_8c.html#a8f65ca9f5a72be7fe776126fc632f8a9">startup()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
<a href="http://solettaproject.github.io/docs/">Full online documentation</a> | 
<a href="index.html">C API Index</a>
</small></address>
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
